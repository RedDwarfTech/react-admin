"use strict";(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[748],{74748:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var a=n(94256),r=n(16306),i=n(38439),l=n(71553),o=n(1549),c=n(26933),u=n(51110),s=n(97692),d=n(35466),m=n(15732),h=n(98152),p=n(33116),f=n(70445),g=n(41253),y=n(60422),Z=n(18247),k=n(43039),S=n(27631),E=n(49624),v=n(40137),b=n(2778),C=n(95937),_=n(55609),I=n(48230),w=n(8860),z=n(59964),N=n(36724),x=n(26591),P=n.n(x),j=n(32851),R=n(97076),T=n.n(R),O=n(77977);var U=h.Z.TabPane,F=function(e){(0,o.Z)(x,e);var t,n,I=(t=x,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function x(){var e;(0,r.Z)(this,x);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=I.call.apply(I,[this].concat(n)),(0,s.Z)((0,l.Z)(e),"state",{loading:!1,pageNum:1,pageSize:10,channelId:null,editorPick:null,name:null,defaultActiveKey:1,showModal:!1}),(0,s.Z)((0,l.Z)(e),"enterLoading",(function(){e.setState({loading:!0})})),(0,s.Z)((0,l.Z)(e),"onPageChange",(function(t,n){if(void 0!==n){e.setState({pageNum:t});var a={pageSize:e.state.pageSize,pageNum:t};(0,z.m)(a)}})),(0,s.Z)((0,l.Z)(e),"onChange",(function(t,n,a,r){if(0!==Object.keys(a).length||0!==Object.keys(n)){var i={pageSize:e.state.pageSize,pageNum:e.state.pageNum,orderByClause:a&&0===Object.keys(a).length?"":(0,N.j)(a),editorPick:0===Object.keys(n).length||void 0===n.editorPick?null:n.editorPick[0]};(0,z.m)(i)}})),(0,s.Z)((0,l.Z)(e),"cancelSub",(function(e,t){var n={id:t.id,subStatus:1===t.subStatus?0:1};(0,w.Lk)(n)})),(0,s.Z)((0,l.Z)(e),"showArticles",(function(t){e.props.history.push("/app/cruise/article?channelId="+encodeURIComponent(t.id))})),(0,s.Z)((0,l.Z)(e),"editorPick",(function(e){var t={id:e.id,editor_pick:1===e.editorPick?0:1};(0,w.ge)(t)})),(0,s.Z)((0,l.Z)(e),"getColumnSearchProps",(function(t){return{filterDropdown:function(n){var a=n.setSelectedKeys,r=n.selectedKeys,i=n.confirm,l=n.clearFilters;return d.createElement("div",{style:{padding:8}},d.createElement(p.Z,{ref:function(t){e.searchInput=t},placeholder:"Search ".concat(t),value:r[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(n){return e.handleSearch(r,i,t,n)},style:{width:188,marginBottom:8,display:"block"}}),d.createElement(f.Z,{type:"primary",onClick:function(n){return e.handleSearch(r,i,t,n)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),d.createElement(f.Z,{onClick:function(){return e.handleReset(l)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return d.createElement(_.Z,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(e,n){return n[t].toString().toLowerCase().includes(e.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){return e.searchInput.select()}))},render:function(n,a){return e.state.searchedColumn===t?d.createElement("a",{href:a.subUrl,target:"_blank"},d.createElement(P(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchText],autoEscape:!0,textToHighlight:n.toString()}),1===a.editorPick&&"subName"===t?d.createElement(g.Z,{color:"green-inverse"},"编辑选择"):d.createElement("span",null)):d.createElement("a",{href:a.subUrl,target:"_blank"},n,1===a.editorPick&&"subName"===t?d.createElement(g.Z,{color:"green-inverse"},"编辑选择"):d.createElement("span",null))}}})),(0,s.Z)((0,l.Z)(e),"handleSearch",(function(t,n,a,r){n(),e.setState({searchText:t[0],searchedColumn:a}),"subName"===a&&e.setState({name:t[0]},(function(){e.handleFetch()})),"subUrl"===a&&e.setState({subUrl:t[0]},(function(){e.handleFetch()}))})),(0,s.Z)((0,l.Z)(e),"handleFetch",(function(){var t={pageSize:e.state.pageSize,pageNum:e.state.pageNum,name:e.state.name,subUrl:e.state.subUrl};(0,w.mj)(t)})),(0,s.Z)((0,l.Z)(e),"handleReset",(function(t){t(),e.setState({searchText:""})})),(0,s.Z)((0,l.Z)(e),"tabChange",(function(t){e.setState({defaultActiveKey:t}),"1"===t?(0,w.mj)({}):"2"===t?(0,w.mj)({minimalReputation:10,excludeEditorPickChannel:1}):"3"===t&&(0,w.mj)({editorPick:1})})),e}return(0,i.Z)(x,[{key:"changePageSize",value:function(e,t){this.setState({pageSize:e});var n={pageSize:e,pageNum:this.state.pageNum};(0,z.m)(n)}},{key:"componentDidMount",value:function(){var e=j.parse(this.props.location.search);if(e&&0===Object.keys(e).length||void 0===e){var t={pageSize:this.state.pageSize,pageNum:this.state.pageNum};(0,z.m)(t)}else{this.setState({channelId:e.channelId});var n={pageSize:this.state.pageSize,pageNum:this.state.pageNum,subSourceId:e.channelId};(0,z.m)(n)}}},{key:"componentWillUnmount",value:function(){y.Z.destroy(),this.timer&&clearTimeout(this.timer)}},{key:"render",value:function(){var e=this,t=[{title:"ID",dataIndex:"id",key:"id"},{title:"域名备注",dataIndex:"domain_name",key:"domain_name"},{title:"频率配置",dataIndex:"cron",key:"cron"},{title:"域名",dataIndex:"domain_url",key:"domain_url"},{title:"提前通知（天）",dataIndex:"days_before_trigger",key:"days_before_trigger"},{title:"触发检查时间",dataIndex:"notify_trigger_date",key:"notify_trigger_date"},{title:"下一次检查时间",dataIndex:"next_trigger_time",key:"next_trigger_time"},{title:"证书过期时间",dataIndex:"expire_date",key:"expire_date"},{title:"剩余天数",render:function(e){return d.createElement("span",null,T()(e.expire_date).diff(new Date,"day"))}},{title:"监控状态",dataIndex:"monitor_status",key:"monitor_status",render:function(e){return"1"===e?d.createElement("span",null,"正常"):d.createElement("span",null,"停止通知")}},{title:"Notify Channel",dataIndex:"notifyChannels",key:"notify_channel",render:function(e){return"1"===e?d.createElement("span",null,"Bind"):d.createElement("span",null,"Not Bind Yet")}},{title:"操作",key:"action",render:function(e,t){return d.createElement("span",null,d.createElement(f.Z,{type:"primary"},"详情"),d.createElement(Z.Z,{type:"vertical"}))}}],n=this.props.domain.domain.list,r=this.props.domain.domain,i=0,l=0,o=0;n&&0===Object.keys(n).length||void 0===n||(i=parseInt(r.pagination.total),l=r.pagination.pageSize,o=r.pagination.pageNum);var c={showSizeChanger:!0,showQuickJumper:!0,pageSize:l,pageSizeOptions:["10","20","30"],showTotal:function(){return"共".concat(i,"条")},current:o,total:i,onShowSizeChange:function(t,n){return e.changePageSize(n,t)},onChange:function(t,n){return e.onPageChange(t,n)}},u=function(){return d.createElement(h.Z,{defaultActiveKey:e.state.defaultActiveKey,onChange:e.tabChange},d.createElement(U,{tab:"全部",key:"1"},d.createElement(g,null)))},s=function(){var t=k.Z.useForm(),n=(0,a.Z)(t,1)[0];return d.createElement("div",null,d.createElement(f.Z,{type:"primary",onClick:function(){e.setState({showModal:!0})}},"新增"),d.createElement(S.Z,{title:"新增",visible:e.state.showModal,onOk:function(){e.setState({showModal:!1})},onCancel:function(){e.setState({showModal:!1})}},d.createElement(k.Z,{form:n,layout:"vertical",onValuesChange:function(e){e.requiredMarkValue}},d.createElement(k.Z.Item,{label:"域名备注",required:!0,tooltip:"This is a required field"},d.createElement(p.Z,{placeholder:"input placeholder"})),d.createElement(k.Z.Item,{label:"域名",tooltip:{title:"Tooltip with customize icon",icon:d.createElement(O.Z,null)}},d.createElement(p.Z,{placeholder:"input placeholder"})))))},g=function(){return d.createElement(E.Z,null,d.createElement(v.Z,null,d.createElement("div",{className:"base-style"},d.createElement("h3",{id:"basic"},"全部域名"),d.createElement(Z.Z,null),d.createElement(s,null),d.createElement(b.Z,{columns:t,dataSource:n,pagination:c,rowKey:"id"}))))};return d.createElement(C.Z,{className:"animated fadeIn"},d.createElement("div",null,d.createElement(m.Z,{arr:["应用","Cernitor","域名"]})),d.createElement(u,null))}}]),x}(d.Component),K=(0,I.EN)(F)}}]);