{"version":3,"sources":["../node_modules/echarts/lib/component/axisPointer/modelHelper.js","../node_modules/echarts/lib/chart/helper/Symbol.js","../node_modules/echarts/lib/chart/line/helper.js","../node_modules/echarts/lib/coord/cartesian/AxisModel.js","../node_modules/echarts/lib/component/axis/AxisBuilder.js","../node_modules/echarts/lib/component/axis/AxisView.js","../node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","../node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","../node_modules/echarts/lib/component/axisPointer/globalListener.js","../node_modules/echarts/lib/component/axisPointer/viewHelper.js","../node_modules/screenfull/dist/screenfull.js","../node_modules/echarts/lib/chart/line.js","../node_modules/echarts/lib/chart/line/LineSeries.js","../node_modules/echarts/lib/chart/line/LineView.js","../node_modules/echarts/lib/chart/helper/SymbolDraw.js","../node_modules/echarts/lib/chart/helper/labelHelper.js","../node_modules/echarts/lib/chart/line/lineAnimationDiff.js","../node_modules/echarts/lib/chart/line/poly.js","../node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","../node_modules/echarts/lib/visual/symbol.js","../node_modules/echarts/lib/layout/points.js","../node_modules/echarts/lib/processor/dataSample.js","../node_modules/echarts/lib/component/gridSimple.js","../node_modules/echarts/lib/coord/cartesian/Grid.js","../node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","../node_modules/echarts/lib/coord/cartesian/Cartesian.js","../node_modules/echarts/lib/coord/cartesian/Axis2D.js","../node_modules/echarts/lib/coord/cartesian/GridModel.js","../node_modules/echarts/lib/coord/axisModelCreator.js","../node_modules/echarts/lib/coord/axisDefault.js","../node_modules/echarts/lib/component/axis.js","../node_modules/echarts/lib/component/axis/CartesianAxisView.js","../node_modules/echarts/lib/component/axis/axisSplitHelper.js","../node_modules/echarts/lib/component/tooltip.js","../node_modules/echarts/lib/component/axisPointer.js","../node_modules/echarts/lib/component/axisPointer/axisTrigger.js","../node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","../node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","../node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","../node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","../node_modules/echarts/lib/component/tooltip/TooltipModel.js","../node_modules/echarts/lib/component/tooltip/TooltipView.js","../node_modules/echarts/lib/component/tooltip/TooltipContent.js","../node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","../node_modules/echarts/lib/component/title.js","../node_modules/echarts/lib/component/legend.js","../node_modules/echarts/lib/component/legend/LegendModel.js","../node_modules/echarts/lib/component/legend/legendAction.js","../node_modules/echarts/lib/component/legend/LegendView.js","../node_modules/echarts/lib/component/helper/listComponent.js","../node_modules/echarts/lib/component/legend/legendFilter.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js"],"names":["zrUtil","require","Model","each","curry","checkPropInLink","linkPropValue","axisPropValue","isArray","indexOf","getAxisInfo","axisModel","coordSysAxesInfo","ecModel","getComponent","axesInfo","makeKey","isHandleTrigger","axisPointerModel","get","model","type","id","exports","collect","api","result","seriesInvolved","coordSysMap","globalTooltipModel","globalAxisPointerModel","linksOption","linkGroups","getCoordinateSystems","coordSys","axisPointerEnabled","coordSysKey","axesInfoInCoordSys","baseTooltipModel","getModel","getAxes","saveTooltipAxisInfo","getTooltipAxes","triggerAxis","cross","tooltipAxes","baseAxes","otherAxes","fromTooltip","triggerTooltip","axis","axisPointerShow","snap","tooltipAxisPointerModel","volatileOption","field","clone","labelOption","label","show","tooltipAxisPointerLabelShow","crossStyle","lineStyle","defaults","textStyle","makeAxisPointerModel","key","involveSeries","axisInfo","useHandle","seriesModels","groupIndex","dim","i","length","linkOption","componentIndex","name","getLinkGroupIndex","linkGroup","mapper","collectAxesInfo","eachSeries","seriesModel","coordinateSystem","seriesTooltipTrigger","seriesTooltipShow","getAxis","push","seriesDataCount","getData","count","this","collectSeriesInfo","fixValue","scale","option","status","value","parse","extent","getExtent","slice","reverse","isBlank","getAxisPointerModel","createSymbol","graphic","parsePercent","getDefaultLabel","SymbolClz","data","idx","seriesScope","Group","call","updateData","symbolProto","prototype","getSymbolSize","symbolSize","getItemVisual","Array","getScale","driftSymbol","dx","dy","parent","drift","_createSymbol","symbolType","keepAspect","removeAll","color","symbolPath","attr","z2","culling","_symbolType","add","stopSymbolAnimation","toLastFrame","childAt","stopAnimation","getSymbolPath","highlight","trigger","downplay","setZ","zlevel","z","setDraggable","draggable","cursor","silent","hostModel","isInit","updateProps","_updateCommon","fadeIn","target","style","opacity","initProps","_seriesModel","normalStyleAccessPath","emphasisStyleAccessPath","normalLabelAccessPath","emphasisLabelAccessPath","highDownOnUpdate","fromState","toState","incremental","useHoverLayer","__symbolOriginalScale","ratio","emphasisOpt","Math","max","animateTo","useStyle","strokeNoScale","setStyle","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","itemStyle","hoverItemStyle","symbolOffset","labelModel","hoverLabelModel","hoverAnimation","cursorStyle","hasItemOption","itemModel","getItemModel","getItemStyle","getShallow","extend","elStyle","symbolRotate","PI","setColor","symbolInnerColor","liftZ","z2Origin","__z2Origin","useNameLabel","setLabelStyle","labelFetcher","labelDataIndex","defaultText","opt","getName","isRectText","autoColor","hoverStyle","isAnimationEnabled","setHoverStyle","fadeOut","cb","keepLabel","text","dataIndex","inherits","_default","module","isDimensionStacked","map","prepareDataCoordInfo","valueOrigin","stacked","baseAxis","getBaseAxis","valueAxis","getOtherAxis","valueStart","getValueStart","baseAxisDim","valueAxisDim","valueDim","mapDimension","baseDim","baseDataOffset","dims","dimensions","coordDim","stackResultDim","getCalculationInfo","dataDimsForPoint","stackedOverDimension","getStackedOnPoint","dataCoordInfo","NaN","isNaN","stackedData","dataToPoint","ComponentModel","axisModelCreator","axisModelCommonMixin","AxisModel","init","superApply","arguments","resetRange","mergeOption","restoreData","getCoordSysModel","queryComponents","mainType","index","gridIndex","gridId","getAxisType","axisDim","merge","extraOption","offset","_util","retrieve","formatUtil","_number","isRadianAroundZero","remRadian","matrixUtil","v2ApplyTransform","applyTransform","shouldShowAllLabels","AxisBuilder","labelOffset","nameDirection","tickDirection","labelDirection","group","dumbGroup","position","rotation","updateTransform","_transform","transform","_dumbGroup","constructor","hasBuilder","builders","getGroup","axisLine","matrix","pt1","pt2","lineCap","getLineStyle","Line","anid","subPixelOptimize","shape","x1","y1","x2","y2","strokeContainThreshold","arrows","arrowSize","arrowOffset","symbolWidth","symbolHeight","rotate","r","sqrt","point","symbol","stroke","pos","cos","sin","axisTickLabel","ticksEls","axisBuilder","tickModel","lineStyleModel","tickEndCoord","createTicks","getTicksCoords","buildAxisMajorTicks","labelEls","axisLabelShow","labelMargin","labels","getViewLabels","labelRotation","labelRotate","labelLayout","innerTextLayout","rawCategoryData","getCategories","isLabelSilent","triggerEvent","labelItem","tickValue","formattedLabel","rawLabel","itemLabelModel","textColor","getTextColor","dataToCoord","textEl","Text","setTextStyle","textAlign","textVerticalAlign","textFill","eventData","makeAxisEventDataBase","targetType","decomposeTransform","buildAxisLabel","tickEls","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","fixMinMaxLabelShow","minorTickModel","minorTicksCoords","getMinorTicksCoords","minorTickLineStyle","minorTicksEls","k","buildAxisMinorTicks","axisName","axisNameAvailableWidth","nameLocation","textStyleModel","gap","gapSignal","isNameLocationCenter","nameRotation","textPosition","textRotate","rotationDiff","inverse","onLeft","endTextLayout","abs","isFinite","textFont","getFont","truncateOpt","ellipsis","maxWidth","nameTruncateMaxWidth","truncatedText","truncateText","minChar","placeholder","tooltipOpt","formatterParams","componentType","$vars","__fullText","__truncatedText","tooltip","content","formatter","axisRotation","textRotation","direction","el","ignore","current","next","firstRect","getBoundingRect","nextRect","mRotationBack","identity","mul","getLocalTransform","intersect","ticksCoords","tickTransform","tickLineStyle","aniid","tickCoord","coord","tickEl","__DEV__","echarts","axisPointerModelHelper","AxisView","extendComponentView","_axisPointer","axisPointerClass","render","payload","updateAxisPointer","force","remove","axisPointer","dispose","disposeAxisPointer","axisView","forceRender","Clazz","getAxisPointerClass","axisPointerClazz","registerAxisPointerClass","clazz","layout","gridModel","grid","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","axisPosition","rect","getRect","rectBound","x","width","y","height","left","right","top","bottom","onZero","axisOffset","posBound","onZeroCoord","toGlobalCoord","min","labelInside","modelUtil","finder","seriesIndex","getSeriesByIndex","queryDataIndex","getItemGraphicEl","getTooltipPosition","getValues","env","inner","makeInner","onLeave","record","e","dispatchAction","handler","doEnter","currTrigger","register","node","zr","getZr","records","initialized","useHandler","eventType","on","dis","pendings","showTip","hideTip","pendingList","makeDispatchAction","actuallyPayload","showLen","hideLen","dispatchTooltipFinally","initGlobalListeners","unregister","textContain","axisHelper","buildLabelElOption","elOption","labelPos","getValueLabel","precision","paddings","normalizeCssArray","font","textRect","align","verticalAlign","viewWidth","getWidth","viewHeight","getHeight","confineInContainer","bgColor","textPadding","fill","lineWidth","seriesDataIndices","getLabel","params","getAxisRawValue","axisDimension","axisIndex","seriesData","idxItem","series","dataIndexInside","dataParams","getDataParams","isString","replace","isFunction","getTransformedPosition","layoutInfo","create","translate","buildElStyle","axisPointerType","styleModel","getAreaStyle","buildCartesianSingleLabelElOption","textLayout","makeLineShape","p1","p2","xDimIndex","makeRectShape","xy","wh","makeSectorShape","cx","cy","r0","startAngle","endAngle","clockwise","document","window","isCommonjs","fn","val","fnMap","l","ret","eventNameMap","change","fullscreenchange","error","fullscreenerror","screenfull","request","element","options","Promise","resolve","reject","onFullScreenEntered","off","bind","returnPromise","documentElement","requestFullscreen","then","catch","exit","isFullscreen","onFullScreenExit","exitFullscreen","toggle","onchange","callback","onerror","event","eventName","addEventListener","removeEventListener","raw","Object","defineProperties","Boolean","fullscreenElement","enumerable","isEnabled","fullscreenEnabled","visualSymbol","layoutPoints","dataSample","registerVisual","registerLayout","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","createListFromArray","dependencies","getInitialData","getSource","useEncodeDefaulter","defaultOption","legendHoverLink","clip","step","smooth","smoothMonotone","showSymbol","showAllSymbol","connectNulls","sampling","animationEasing","progressive","hoverLayerThreshold","Infinity","fromPoints","SymbolDraw","lineAnimationDiff","_poly","Polyline","Polygon","ChartView","_helper","_createClipPathFromCoordSys","createGridClipPath","createPolarClipPath","isPointsSame","points1","points2","getBoundingDiff","min1","max1","min2","max2","getSmooth","turnPointsIntoStep","points","stepTurnAt","baseIndex","stepPoints","nextPt","pt","stepPt","middle","stepPt2","getIsIgnoreFunc","isAuto","categoryAxis","getAxesByScale","axisExtent","availSize","dataLen","round","isHorizontal","canShowAllSymbolForCategory","categoryDataDim","labelMap","hasOwnProperty","createLineClipPath","hasAnimation","clipPath","rectShape","expandSize","lineGroup","symbolDraw","_symbolDraw","_lineGroup","areaStyleModel","mapArray","getItemLayout","isCoordSysPolar","prevCoordSys","_coordSys","polyline","_polyline","polygon","_polygon","isAreaChart","isEmpty","stackedOnPoints","len","getStackedOnPoints","isIgnoreFunc","oldData","_data","eachItemGraphicEl","__temp","setItemGraphicEl","clipShapeForSymbol","getArea","r1","_clipShapeForSymbol","_step","_newPolygon","setClipPath","isIgnore","clipShape","_stackedOnPoints","_points","_updateAnimation","setShape","_newPolyline","visualColor","visualMetaList","getVisual","visualMeta","dimIndex","dimension","dimName","dimInfo","getDimensionInfo","colorStops","stops","stop","stopLen","outerColors","minCoord","maxCoord","coordSpan","unshift","gradient","LinearGradient","getVisualGradient","lineJoin","stackedOnSeries","stackedOnSmooth","_valueOrigin","contain","diff","stackedOnCurrent","stackedOnNext","__points","updatedDataInfo","diffStatus","cmd","idx1","ptIdx","animators","during","isObject","symbolCtor","_symbolCtor","symbolDrawProto","symbolNeedsDraw","normalizeUpdateOpt","makeSeriesScope","SymbolCtor","newIdx","symbolEl","update","oldIdx","execute","isPersistent","updateLayout","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","isGroup","start","end","traverse","enableAnimation","retrieveRawValue","labelDims","vals","join","newData","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","diffResult","diffData","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldDataNewCoordInfo","diffItem","pointAdded","currentPt","getRawIndex","rawIndex","sort","a","b","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","Path","vec2","fixClipWithShadow","vec2Min","vec2Max","scaleAndAdd","v2Copy","copy","v","cp0","cp1","isPointNull","p","drawSegment","ctx","segLen","allLen","dir","smoothMin","smoothMax","drawMono","apply","drawNonMono","prevIdx","prevP","ctrlLen","bezierCurveTo","lineTo","nextIdx","nextP","ratioNextSeg","lenPrevSeg","lenNextSeg","sub","dist","getBoundingBox","smoothConstraint","ptMin","ptMax","brush","buildPath","bbox","stackedOnBBox","closePath","cartesian","floor","Rect","polar","sectorArea","Sector","createClipPath","seriesType","defaultSymbolType","legendSymbol","performRawSeries","reset","hasSymbolTypeCallback","hasSymbolSizeCallback","hasSymbolRotateCallback","hasCallback","seriesSymbol","seriesSymbolSize","setVisual","symbolKeepAspect","isSeriesFiltered","dataEach","rawValue","getRawValue","setItemVisual","itemSymbolType","itemSymbolSize","itemSymbolRotate","itemSymbolKeepAspect","createRenderPlanner","plan","isLargeRender","pipelineContext","large","dimLen","progress","segCount","Float32Array","tmpIn","tmpOut","setItemLayout","setLayout","samplers","average","frame","sum","nearest","indexSampler","modifyOutputEnd","sampler","size","rate","setData","downSample","registerPreprocessor","xAxis","yAxis","getLayoutRect","_axisHelper","createScaleByModel","ifAxisCrossZero","niceScaleExtent","estimateLabelUnionRect","Cartesian2D","Axis2D","CoordinateSystem","getStackedDimension","isAxisUsedInTheGrid","Grid","_coordsMap","_coordsList","_axesMap","_axesList","_initCartesian","gridProto","fixAxisOnZero","axesMap","otherAxisDim","onZeroRecords","onZeroAxisIndex","canOnZeroToAxis","getOnZeroRecordKey","_rect","_updateScale","resize","ignoreContainLabel","gridRect","getBoxLayoutParams","axesList","adjustAxes","setExtent","coordBase","axisExtentSum","toLocalCoord","updateAxisTransform","labelUnionRect","margin","axisType","axesMapOnDim","getCartesian","xAxisIndex","yAxisIndex","coordList","getCartesians","convertToPixel","_findConvertTarget","convertFromPixel","pointToData","coordToData","xAxisModel","getReferringComponents","yAxisModel","coordsList","containPoint","axisPositionUsed","axesCount","eachComponent","createAxisCreator","isCategory","onBand","addAxis","unionExtent","unionExtentFromData","isCartesian2D","axesModels","findAxesModels","otherAxis","axesTypes","grids","BoundingRect","Cartesian","axisX","axisY","containData","reserved","out","clampData","xScale","yScale","xAxisExtent","yAxisExtent","xExtent","getGlobalExtent","yExtent","dimAxisMapper","_axes","_dimList","scaleType","toLowerCase","filter","_dataCoordConvert","input","method","dimList","output","Axis","coordExtent","asc","clamp","layoutMode","containLabel","backgroundColor","borderWidth","borderColor","axisDefault","_layout","getLayoutParams","mergeLayoutParam","OrdinalMeta","AXIS_TYPES","BaseAxisModelClass","axisTypeDefaulter","extraDefaultOption","mergeDefaultAndTheme","inputPositionParams","themeModel","getTheme","getDefaultOption","optionUpdated","__ordinalMeta","createByAxisModel","rawData","categories","getOrdinalMeta","mergeAll","registerSubTypeDefaulter","nameRotate","nameTruncate","nameTextStyle","nameGap","axisTick","inside","axisLabel","fontSize","splitLine","splitArea","areaStyle","boundaryGap","deduplication","alignWithLabel","interval","splitNumber","minorTick","minorSplitLine","timeAxis","logAxis","logBase","cartesianAxisHelper","_axisSplitHelper","rectCoordAxisBuildSplitArea","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","groupTransition","superCall","_splitLine","splitLineModel","lineColors","lineCount","colorIndex","_minorSplitLine","_splitArea","axisGroup","splitAreaModel","areaColors","areaColorsLen","lastSplitAreaColors","__splitAreaColors","newSplitAreaColors","createHashMap","cIndex","prev","set","registerAction","axisTrigger","link","modelHelper","findPointFromSeries","processOnAxis","newValue","updaters","dontSnap","outputFinder","payloadInfo","snapToValue","payloadBatch","minDist","Number","MAX_VALUE","minDiff","seriesNestestValue","dataIndices","dataDim","getAxisTooltipData","nestestValue","indicesOfNearest","buildPayloadsBySeries","showPointer","showTooltip","showValueMap","dataByCoordSys","coordSysModel","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","dataByAxis","list","axisId","valueLabelOpt","makeMapperParam","item","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","outputAxesInfo","valItem","updateModelActually","sampleItem","escapeConnect","tooltipOption","dispatchTooltipActually","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","batch","dispatchHighDownActually","extendComponentModel","triggerOn","animation","animationDurationUpdate","shadowStyle","padding","handle","icon","throttle","globalListener","AxisPointerView","offsetX","offsetY","_model","BaseAxisPointer","viewHelper","CartesianAxisPointer","makeElOption","otherExtent","pixelValue","pointerOption","pointerShapeBuilder","graphicKey","pointer","getHandleTransform","updateHandleTransform","delta","currPosition","cursorOtherValue","cursorPoint","line","getAxisDimIndex","shadow","bandWidth","getBandWidth","span","clazzUtil","eventTool","throttleUtil","animationModel","moveAnimation","props","propsEqual","lastProps","newProps","equals","lastProp","updateLabelShowHide","labelEl","getHandleTransProps","trans","updateMandatoryProps","_group","_lastGraphicKey","_handle","_dragging","_lastValue","_lastStatus","_payloadInfo","animationThreshold","_axisModel","_axisPointerModel","_api","hide","clear","_moveAnimation","determineAnimation","doUpdateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","_renderHandle","isCategoryAxis","useSnap","pointerEl","handleModel","createIcon","onmousemove","onmousedown","_onHandleDragMove","ondragend","_onHandleDragEnd","handleSize","createOrUpdate","_moveHandleToValue","_doDispatchAxisPointer","doClear","buildLabel","enableClassExtend","showContent","alwaysShowContent","displayMode","renderMode","confine","showDelay","hideDelay","transitionDuration","enterable","borderRadius","extraCssText","animationEasingUpdate","TooltipContent","TooltipRichContent","numberUtil","layoutUtil","axisPointerViewHelper","getTooltipRenderMode","proxyRect","tooltipContent","tooltipModel","_renderMode","getDom","appendToBody","_newLine","_tooltipContent","_tooltipModel","_ecModel","_lastDataByCoordSys","_alwaysShowContent","setEnterable","_initGlobalListener","_keepShow","_tryShow","_hide","_lastX","_lastY","self","clearTimeout","_refreshUpdateTimeout","setTimeout","isDisposed","manuallyShowTip","from","uid","_ticket","_manuallyAxisShowTip","pointInfo","findHover","manuallyHideTip","hideLater","buildTooltipModel","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","delay","_showTimout","singleDefaultHTML","singleParamsList","singleTooltipModel","newLine","markers","itemCoordSys","axisValue","seriesDefaultHTML","valueLabel","axisValueLabel","html","seriesTooltip","formatTooltip","newMarkers","firstLine","encodeHTML","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","undefined","dataModel","dataType","tooltipTrigger","defaultHtml","asyncTicket","subTooltipModel","formatTpl","cbTicket","setContent","contentSize","getSize","vAlign","viewSize","layoutRect","domWidth","domHeight","rectWidth","rectHeight","calcTooltipPosition","gapH","gapV","getOuterSize","refixTooltipPosition","isCenterAlign","confineTooltipPosition","moveTo","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","j","newIdxItem","modelCascade","resultModel","pop","isInstance","zrColor","eventUtil","domUtil","toCamelCase","vendors","assembleCssText","cssText","duration","transitionText","vendorPrefix","assembleTransition","canvasSupported","toHex","borderName","camelCase","lineHeight","assembleFont","makeStyleCoord","zrX","zrY","zrPainter","painter","zrViewportRoot","getViewportRoot","transformLocalCoord","body","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","container","wxa","createElement","domBelongToZr","_zr","_appendToBody","_styleCoord","appendChild","_container","_show","_hideTimeout","onmouseenter","_enterable","_inContent","normalizeEvent","dispatch","onmouseleave","_hideDelay","stl","currentStyle","defaultView","getComputedStyle","domStyle","_moveTooltipIfResized","ratioX","ratioY","realX","realY","styleCoord","display","innerHTML","pointerEvents","clientWidth","clientHeight","time","isShow","parentNode","removeChild","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","graphicUtil","markerRich","startId","endId","substr","textWidth","textHeight","textBorderRadius","textBackgroundColor","textOffset","rich","textLineHeight","bounding","windowOpen","ignoreSize","subtext","subtarget","itemGap","fontWeight","subtextStyle","titleModel","subtextStyleModel","retrieve2","disableBox","subText","subTextEl","sublink","groupRect","layoutOption","alignStyle","legendFilter","Component","SERIES_FILTER","isNameSpecified","langSelector","legend","selector","defaultSelectorOption","all","title","LegendModel","parentModel","selected","_updateSelector","_updateData","legendData","hasSelected","isSelected","select","potentialData","availableNames","eachRawSeries","isPotential","seriesName","legendVisualProvider","names","getAllNames","concat","_availableNames","dataItem","unSelect","toggleSelected","allSelect","inverseSelect","getOrient","orient","itemWidth","itemHeight","inactiveColor","inactiveBorderColor","selectedMode","selectorLabel","fontFamily","emphasis","selectorPosition","selectorItemGap","selectorButtonGap","legendSelectActionHandler","methodName","selectedMap","isToggleSelect","legendModel","isItemSelected","makeBackground","newlineDisabled","_contentGroup","_backgroundEl","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","isFirstRender","resetInner","itemAlign","renderInner","positionInfo","viewportSize","maxSize","mainRect","layoutInner","contentGroup","legendDrawnMap","selectMode","excludeSeriesId","getSeriesByName","legendSymbolType","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","provider","containName","indexOfName","newline","_createSelector","selectorGroup","selectorItem","labelText","onclick","emphasisLabelModel","createSelectorButton","legendModelItemStyle","itemGroup","itemIcon","legendGlobalTooltipModel","setSymbolStyle","legendSymbolCenter","textX","hitRect","invisible","legendIndex","eachChild","child","__legendDataIndex","box","contentRect","contentPos","selectorRect","selectorPos","orientIdx","hw","yx","dataName","storage","getDisplayList","layoutBox","positionElement","componentModel","boxLayoutParams","legendModels","findComponents","filterSeries","_toConsumableArray","arr","arrayLikeToArray","iter","Symbol","iterator","unsupportedIterableToArray","TypeError"],"mappings":"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","file":"static/js/14.1c8caa35.chunk.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nfunction collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get('axisPointer.type') === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get('axisPointer.axis'));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var key = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[key] = {\n        key: key,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: []\n      };\n      axesInfoInCoordSys[key] = axisInfo;\n      result.seriesInvolved |= involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[key] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var volatileOption = {};\n  each(['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'], function (field) {\n    volatileOption[field] = zrUtil.clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get('label.show');\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && zrUtil.defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get('tooltip.trigger', true);\n    var seriesTooltipShow = seriesModel.get('tooltip.show', true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get('axisPointer.show', true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  }, this);\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || zrUtil.isArray(linkPropValue) && zrUtil.indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nfunction fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\n\nfunction getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\n\nfunction getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get('handle.show');\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nfunction makeKey(model) {\n  return model.type + '||' + model.id;\n}\n\nexports.collect = collect;\nexports.fixValue = fixValue;\nexports.getAxisInfo = getAxisInfo;\nexports.getAxisPointerModel = getAxisPointerModel;\nexports.makeKey = makeKey;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _labelHelper = require(\"./labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/Symbol\n */\n\n/**\n * @constructor\n * @alias {module:echarts/chart/helper/Symbol}\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @extends {module:zrender/graphic/Group}\n */\nfunction SymbolClz(data, idx, seriesScope) {\n  graphic.Group.call(this);\n  this.updateData(data, idx, seriesScope);\n}\n\nvar symbolProto = SymbolClz.prototype;\n/**\n * @public\n * @static\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {Array.<number>} [width, height]\n */\n\nvar getSymbolSize = SymbolClz.getSymbolSize = function (data, idx) {\n  var symbolSize = data.getItemVisual(idx, 'symbolSize');\n  return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n};\n\nfunction getScale(symbolSize) {\n  return [symbolSize[0] / 2, symbolSize[1] / 2];\n}\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nsymbolProto._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n  // Remove paths created before\n  this.removeAll();\n  var color = data.getItemVisual(idx, 'color'); // var symbolPath = createSymbol(\n  //     symbolType, -0.5, -0.5, 1, 1, color\n  // );\n  // If width/height are set too small (e.g., set to 1) on ios10\n  // and macOS Sierra, a circle stroke become a rect, no matter what\n  // the scale is set. So we set width/height as 2. See #4150.\n\n  var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, color, keepAspect);\n  symbolPath.attr({\n    z2: 100,\n    culling: true,\n    scale: getScale(symbolSize)\n  }); // Rewrite drift method\n\n  symbolPath.drift = driftSymbol;\n  this._symbolType = symbolType;\n  this.add(symbolPath);\n};\n/**\n * Stop animation\n * @param {boolean} toLastFrame\n */\n\n\nsymbolProto.stopSymbolAnimation = function (toLastFrame) {\n  this.childAt(0).stopAnimation(toLastFrame);\n};\n/**\n * FIXME:\n * Caution: This method breaks the encapsulation of this module,\n * but it indeed brings convenience. So do not use the method\n * unless you detailedly know all the implements of `Symbol`,\n * especially animation.\n *\n * Get symbol path element.\n */\n\n\nsymbolProto.getSymbolPath = function () {\n  return this.childAt(0);\n};\n/**\n * Get scale(aka, current symbol size).\n * Including the change caused by animation\n */\n\n\nsymbolProto.getScale = function () {\n  return this.childAt(0).scale;\n};\n/**\n * Highlight symbol\n */\n\n\nsymbolProto.highlight = function () {\n  this.childAt(0).trigger('emphasis');\n};\n/**\n * Downplay symbol\n */\n\n\nsymbolProto.downplay = function () {\n  this.childAt(0).trigger('normal');\n};\n/**\n * @param {number} zlevel\n * @param {number} z\n */\n\n\nsymbolProto.setZ = function (zlevel, z) {\n  var symbolPath = this.childAt(0);\n  symbolPath.zlevel = zlevel;\n  symbolPath.z = z;\n};\n\nsymbolProto.setDraggable = function (draggable) {\n  var symbolPath = this.childAt(0);\n  symbolPath.draggable = draggable;\n  symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n};\n/**\n * Update symbol properties\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Object} [seriesScope]\n * @param {Object} [seriesScope.itemStyle]\n * @param {Object} [seriesScope.hoverItemStyle]\n * @param {Object} [seriesScope.symbolRotate]\n * @param {Object} [seriesScope.symbolOffset]\n * @param {module:echarts/model/Model} [seriesScope.labelModel]\n * @param {module:echarts/model/Model} [seriesScope.hoverLabelModel]\n * @param {boolean} [seriesScope.hoverAnimation]\n * @param {Object} [seriesScope.cursorStyle]\n * @param {module:echarts/model/Model} [seriesScope.itemModel]\n * @param {string} [seriesScope.symbolInnerColor]\n * @param {Object} [seriesScope.fadeIn=false]\n */\n\n\nsymbolProto.updateData = function (data, idx, seriesScope) {\n  this.silent = false;\n  var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n  var seriesModel = data.hostModel;\n  var symbolSize = getSymbolSize(data, idx);\n  var isInit = symbolType !== this._symbolType;\n\n  if (isInit) {\n    var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n    this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n  } else {\n    var symbolPath = this.childAt(0);\n    symbolPath.silent = false;\n    graphic.updateProps(symbolPath, {\n      scale: getScale(symbolSize)\n    }, seriesModel, idx);\n  }\n\n  this._updateCommon(data, idx, symbolSize, seriesScope);\n\n  if (isInit) {\n    var symbolPath = this.childAt(0);\n    var fadeIn = seriesScope && seriesScope.fadeIn;\n    var target = {\n      scale: symbolPath.scale.slice()\n    };\n    fadeIn && (target.style = {\n      opacity: symbolPath.style.opacity\n    });\n    symbolPath.scale = [0, 0];\n    fadeIn && (symbolPath.style.opacity = 0);\n    graphic.initProps(symbolPath, target, seriesModel, idx);\n  }\n\n  this._seriesModel = seriesModel;\n}; // Update common properties\n\n\nvar normalStyleAccessPath = ['itemStyle'];\nvar emphasisStyleAccessPath = ['emphasis', 'itemStyle'];\nvar normalLabelAccessPath = ['label'];\nvar emphasisLabelAccessPath = ['emphasis', 'label'];\n/**\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Array.<number>} symbolSize\n * @param {Object} [seriesScope]\n */\n\nsymbolProto._updateCommon = function (data, idx, symbolSize, seriesScope) {\n  var symbolPath = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var color = data.getItemVisual(idx, 'color'); // Reset style\n\n  if (symbolPath.type !== 'image') {\n    symbolPath.useStyle({\n      strokeNoScale: true\n    });\n  } else {\n    symbolPath.setStyle({\n      opacity: 1,\n      shadowBlur: null,\n      shadowOffsetX: null,\n      shadowOffsetY: null,\n      shadowColor: null\n    });\n  }\n\n  var itemStyle = seriesScope && seriesScope.itemStyle;\n  var hoverItemStyle = seriesScope && seriesScope.hoverItemStyle;\n  var symbolOffset = seriesScope && seriesScope.symbolOffset;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel;\n  var hoverAnimation = seriesScope && seriesScope.hoverAnimation;\n  var cursorStyle = seriesScope && seriesScope.cursorStyle;\n\n  if (!seriesScope || data.hasItemOption) {\n    var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx); // Color must be excluded.\n    // Because symbol provide setColor individually to set fill and stroke\n\n    itemStyle = itemModel.getModel(normalStyleAccessPath).getItemStyle(['color']);\n    hoverItemStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n    symbolOffset = itemModel.getShallow('symbolOffset');\n    labelModel = itemModel.getModel(normalLabelAccessPath);\n    hoverLabelModel = itemModel.getModel(emphasisLabelAccessPath);\n    hoverAnimation = itemModel.getShallow('hoverAnimation');\n    cursorStyle = itemModel.getShallow('cursor');\n  } else {\n    hoverItemStyle = zrUtil.extend({}, hoverItemStyle);\n  }\n\n  var elStyle = symbolPath.style;\n  var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n  symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n\n  if (symbolOffset) {\n    symbolPath.attr('position', [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])]);\n  }\n\n  cursorStyle && symbolPath.attr('cursor', cursorStyle); // PENDING setColor before setStyle!!!\n\n  symbolPath.setColor(color, seriesScope && seriesScope.symbolInnerColor);\n  symbolPath.setStyle(itemStyle);\n  var opacity = data.getItemVisual(idx, 'opacity');\n\n  if (opacity != null) {\n    elStyle.opacity = opacity;\n  }\n\n  var liftZ = data.getItemVisual(idx, 'liftZ');\n  var z2Origin = symbolPath.__z2Origin;\n\n  if (liftZ != null) {\n    if (z2Origin == null) {\n      symbolPath.__z2Origin = symbolPath.z2;\n      symbolPath.z2 += liftZ;\n    }\n  } else if (z2Origin != null) {\n    symbolPath.z2 = z2Origin;\n    symbolPath.__z2Origin = null;\n  }\n\n  var useNameLabel = seriesScope && seriesScope.useNameLabel;\n  graphic.setLabelStyle(elStyle, hoverItemStyle, labelModel, hoverLabelModel, {\n    labelFetcher: seriesModel,\n    labelDataIndex: idx,\n    defaultText: getLabelDefaultText,\n    isRectText: true,\n    autoColor: color\n  }); // Do not execute util needed.\n\n  function getLabelDefaultText(idx, opt) {\n    return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n  }\n\n  symbolPath.__symbolOriginalScale = getScale(symbolSize);\n  symbolPath.hoverStyle = hoverItemStyle;\n  symbolPath.highDownOnUpdate = hoverAnimation && seriesModel.isAnimationEnabled() ? highDownOnUpdate : null;\n  graphic.setHoverStyle(symbolPath);\n};\n\nfunction highDownOnUpdate(fromState, toState) {\n  // Do not support this hover animation util some scenario required.\n  // Animation can only be supported in hover layer when using `el.incremetal`.\n  if (this.incremental || this.useHoverLayer) {\n    return;\n  }\n\n  if (toState === 'emphasis') {\n    var scale = this.__symbolOriginalScale;\n    var ratio = scale[1] / scale[0];\n    var emphasisOpt = {\n      scale: [Math.max(scale[0] * 1.1, scale[0] + 3), Math.max(scale[1] * 1.1, scale[1] + 3 * ratio)]\n    }; // FIXME\n    // modify it after support stop specified animation.\n    // toState === fromState\n    //     ? (this.stopAnimation(), this.attr(emphasisOpt))\n\n    this.animateTo(emphasisOpt, 400, 'elasticOut');\n  } else if (toState === 'normal') {\n    this.animateTo({\n      scale: this.__symbolOriginalScale\n    }, 400, 'elasticOut');\n  }\n}\n/**\n * @param {Function} cb\n * @param {Object} [opt]\n * @param {Object} [opt.keepLabel=true]\n */\n\n\nsymbolProto.fadeOut = function (cb, opt) {\n  var symbolPath = this.childAt(0); // Avoid mistaken hover when fading out\n\n  this.silent = symbolPath.silent = true; // Not show text when animating\n\n  !(opt && opt.keepLabel) && (symbolPath.style.text = null);\n  graphic.updateProps(symbolPath, {\n    style: {\n      opacity: 0\n    },\n    scale: [0, 0]\n  }, this._seriesModel, this.dataIndex, cb);\n};\n\nzrUtil.inherits(SymbolClz, graphic.Group);\nvar _default = SymbolClz;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar map = _util.map;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} coordSys\n * @param {module:echarts/data/List} data\n * @param {string} valueOrigin lineSeries.option.areaStyle.origin\n */\nfunction prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n  if (stacked |= isDimensionStacked(data, dims[0]\n  /*, dims[1]*/\n  )) {\n    // jshint ignore:line\n    dims[0] = stackResultDim;\n  }\n\n  if (stacked |= isDimensionStacked(data, dims[1]\n  /*, dims[0]*/\n  )) {\n    // jshint ignore:line\n    dims[1] = stackResultDim;\n  }\n\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\n\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  } // auto\n  else {\n      // Both positive\n      if (extent[0] > 0) {\n        valueStart = extent[0];\n      } // Both negative\n      else if (extent[1] < 0) {\n          valueStart = extent[1];\n        } // If is one positive, and one negative, onZero shall be true\n\n    }\n\n  return valueStart;\n}\n\nfunction getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}\n\nexports.prepareDataCoordInfo = prepareDataCoordInfo;\nexports.getStackedOnPoint = getStackedOnPoint;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar axisModelCreator = require(\"../axisModelCreator\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisModel = ComponentModel.extend({\n  type: 'cartesian2dAxis',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Axis2D}\n   */\n  axis: null,\n\n  /**\n   * @override\n   */\n  init: function () {\n    AxisModel.superApply(this, 'init', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function () {\n    AxisModel.superApply(this, 'mergeOption', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  restoreData: function () {\n    AxisModel.superApply(this, 'restoreData', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   * @return {module:echarts/model/Component}\n   */\n  getCoordSysModel: function () {\n    return this.ecModel.queryComponents({\n      mainType: 'grid',\n      index: this.option.gridIndex,\n      id: this.option.gridId\n    })[0];\n  }\n});\n\nfunction getAxisType(axisDim, option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}\n\nzrUtil.merge(AxisModel.prototype, axisModelCommonMixin);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  // Offset is for multiple axis on the same position\n  offset: 0\n};\naxisModelCreator('x', AxisModel, getAxisType, extraOption);\naxisModelCreator('y', AxisModel, getAxisType, extraOption);\nvar _default = AxisModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar retrieve = _util.retrieve;\nvar defaults = _util.defaults;\nvar extend = _util.extend;\nvar each = _util.each;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _number = require(\"../../util/number\");\n\nvar isRadianAroundZero = _number.isRadianAroundZero;\nvar remRadian = _number.remRadian;\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar matrixUtil = require(\"zrender/lib/core/matrix\");\n\nvar _vector = require(\"zrender/lib/core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar shouldShowAllLabels = _axisHelper.shouldShowAllLabels;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n *\n * @param {module:zrender/container/Group} group\n * @param {Object} axisModel\n * @param {Object} opt Standard axis parameters.\n * @param {Array.<number>} opt.position [x, y]\n * @param {number} opt.rotation by radian\n * @param {number} [opt.nameDirection=1] 1 or -1 Used when nameLocation is 'middle' or 'center'.\n * @param {number} [opt.tickDirection=1] 1 or -1\n * @param {number} [opt.labelDirection=1] 1 or -1\n * @param {number} [opt.labelOffset=0] Usefull when onZero.\n * @param {string} [opt.axisLabelShow] default get from axisModel.\n * @param {string} [opt.axisName] default get from axisModel.\n * @param {number} [opt.axisNameAvailableWidth]\n * @param {number} [opt.labelRotate] by degree, default get from axisModel.\n * @param {number} [opt.strokeContainThreshold] Default label interval when label\n * @param {number} [opt.nameTruncateMaxWidth]\n */\n\nvar AxisBuilder = function (axisModel, opt) {\n  /**\n   * @readOnly\n   */\n  this.opt = opt;\n  /**\n   * @readOnly\n   */\n\n  this.axisModel = axisModel; // Default value\n\n  defaults(opt, {\n    labelOffset: 0,\n    nameDirection: 1,\n    tickDirection: 1,\n    labelDirection: 1,\n    silent: true\n  });\n  /**\n   * @readOnly\n   */\n\n  this.group = new graphic.Group(); // FIXME Not use a seperate text group?\n\n  var dumbGroup = new graphic.Group({\n    position: opt.position.slice(),\n    rotation: opt.rotation\n  }); // this.group.add(dumbGroup);\n  // this._dumbGroup = dumbGroup;\n\n  dumbGroup.updateTransform();\n  this._transform = dumbGroup.transform;\n  this._dumbGroup = dumbGroup;\n};\n\nAxisBuilder.prototype = {\n  constructor: AxisBuilder,\n  hasBuilder: function (name) {\n    return !!builders[name];\n  },\n  add: function (name) {\n    builders[name].call(this);\n  },\n  getGroup: function () {\n    return this.group;\n  }\n};\nvar builders = {\n  /**\n   * @private\n   */\n  axisLine: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n\n    if (!axisModel.get('axisLine.show')) {\n      return;\n    }\n\n    var extent = this.axisModel.axis.getExtent();\n    var matrix = this._transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel('axisLine.lineStyle').getLineStyle());\n    this.group.add(new graphic.Line({\n      // Id for animation\n      anid: 'line',\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    }));\n    var arrows = axisModel.get('axisLine.symbol');\n    var arrowSize = axisModel.get('axisLine.symbolSize');\n    var arrowOffset = axisModel.get('axisLine.symbolOffset') || 0;\n\n    if (typeof arrowOffset === 'number') {\n      arrowOffset = [arrowOffset, arrowOffset];\n    }\n\n    if (arrows != null) {\n      if (typeof arrows === 'string') {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (typeof arrowSize === 'string' || typeof arrowSize === 'number') {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var symbolWidth = arrowSize[0];\n      var symbolHeight = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth / 2, -symbolHeight / 2, symbolWidth, symbolHeight, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          var pos = [pt1[0] + r * Math.cos(opt.rotation), pt1[1] - r * Math.sin(opt.rotation)];\n          symbol.attr({\n            rotation: point.rotate,\n            position: pos,\n            silent: true,\n            z2: 11\n          });\n          this.group.add(symbol);\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @private\n   */\n  axisTickLabel: function () {\n    var axisModel = this.axisModel;\n    var opt = this.opt;\n    var ticksEls = buildAxisMajorTicks(this, axisModel, opt);\n    var labelEls = buildAxisLabel(this, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(this, axisModel, opt);\n  },\n\n  /**\n   * @private\n   */\n  axisName: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = this.axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // 'middle'\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth); // FIXME\n    // truncate rich text? (consider performance)\n\n    var truncatedText = ellipsis != null && maxWidth != null ? formatUtil.truncateText(name, maxWidth, textFont, ellipsis, {\n      minChar: 2,\n      placeholder: truncateOpt.placeholder\n    }) : name;\n    var tooltipOpt = axisModel.get('tooltip', true);\n    var mainType = axisModel.mainType;\n    var formatterParams = {\n      componentType: mainType,\n      name: name,\n      $vars: ['name']\n    };\n    formatterParams[mainType + 'Index'] = axisModel.componentIndex;\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'name',\n      __fullText: name,\n      __truncatedText: truncatedText,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: isLabelSilent(axisModel),\n      z2: 1,\n      tooltip: tooltipOpt && tooltipOpt.show ? extend({\n        content: name,\n        formatter: function () {\n          return name;\n        },\n        formatterParams: formatterParams\n      }, tooltipOpt) : null\n    });\n    graphic.setTextStyle(textEl.style, textStyleModel, {\n      text: truncatedText,\n      textFont: textFont,\n      textFill: textStyleModel.getTextColor() || axisModel.get('axisLine.lineStyle.color'),\n      textAlign: textStyleModel.get('align') || labelLayout.textAlign,\n      textVerticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n    });\n\n    if (axisModel.get('triggerEvent')) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisName';\n      textEl.eventData.name = name;\n    } // FIXME\n\n\n    this._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    this.group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nvar makeAxisEventDataBase = AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n  var eventData = {\n    componentType: axisModel.mainType,\n    componentIndex: axisModel.componentIndex\n  };\n  eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n  return eventData;\n};\n/**\n * @public\n * @static\n * @param {Object} opt\n * @param {number} axisRotation in radian\n * @param {number} textRotation in radian\n * @param {number} direction\n * @return {Object} {\n *  rotation, // according to axis\n *  textAlign,\n *  textVerticalAlign\n * }\n */\n\n\nvar innerTextLayout = AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n  var rotationDiff = remRadian(textRotation - axisRotation);\n  var textAlign;\n  var textVerticalAlign;\n\n  if (isRadianAroundZero(rotationDiff)) {\n    // Label is parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI)) {\n    // Label is inverse parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff > 0 && rotationDiff < PI) {\n      textAlign = direction > 0 ? 'right' : 'left';\n    } else {\n      textAlign = direction > 0 ? 'left' : 'right';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n};\n\nfunction endTextLayout(opt, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - opt.rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nvar isLabelSilent = AxisBuilder.isLabelSilent = function (axisModel) {\n  var tooltipOpt = axisModel.get('tooltip');\n  return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n  || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n};\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n  var showMaxLabel = axisModel.get('axisLabel.showMaxLabel'); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next, labelLayout) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, aniid) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      // Id for animation\n      anid: aniid + '_' + ticksCoords[i].tickValue,\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      silent: true\n    });\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisMajorTicks(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, axisBuilder._transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get('axisLine.lineStyle.color')\n  }), 'ticks');\n\n  for (var i = 0; i < ticksEls.length; i++) {\n    axisBuilder.group.add(ticksEls[i]);\n  }\n\n  return ticksEls;\n}\n\nfunction buildAxisMinorTicks(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var minorTicksCoords = axis.getMinorTicksCoords();\n\n  if (!minorTicksCoords.length) {\n    return;\n  }\n\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get('axisLine.lineStyle.color')\n  }));\n\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], axisBuilder._transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      axisBuilder.group.add(minorTicksEls[k]);\n    }\n  }\n}\n\nfunction buildAxisLabel(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get('axisLabel.show'));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue] && rawCategoryData[tickValue].textStyle) {\n      itemLabelModel = new Model(rawCategoryData[tickValue].textStyle, labelModel, axisModel.ecModel);\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get('axisLine.lineStyle.color');\n    var tickCoord = axis.dataToCoord(tickValue);\n    var pos = [tickCoord, opt.labelOffset + opt.labelDirection * labelMargin];\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'label_' + tickValue,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10\n    });\n    graphic.setTextStyle(textEl.style, itemLabelModel, {\n      text: formattedLabel,\n      textAlign: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n      textVerticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n      textFill: typeof textColor === 'function' ? textColor( // (1) In category axis with data zoom, tick is not the original\n      // index of axis.data. So tick should not be exposed to user\n      // in category axis.\n      // (2) Compatible with previous version, which always use formatted label as\n      // input. But in interval scale the formatted label is like '223,445', which\n      // maked user repalce ','. So we modify it to return original val but remain\n      // it as 'string' to avoid error in replacing.\n      axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n    }); // Pack data for mouse event\n\n    if (triggerEvent) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisLabel';\n      textEl.eventData.value = rawLabel;\n    } // FIXME\n\n\n    axisBuilder._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    axisBuilder.group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nvar _default = AxisBuilder;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar axisPointerModelHelper = require(\"../axisPointer/modelHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Base class of AxisView.\n */\nvar AxisView = echarts.extendComponentView({\n  type: 'axis',\n\n  /**\n   * @private\n   */\n  _axisPointer: null,\n\n  /**\n   * @protected\n   * @type {string}\n   */\n  axisPointerClass: null,\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    AxisView.superApply(this, 'render', arguments);\n    updateAxisPointer(this, axisModel, ecModel, api, payload, true);\n  },\n\n  /**\n   * Action handler.\n   * @public\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/model/Global} ecModel\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Object} payload\n   */\n  updateAxisPointer: function (axisModel, ecModel, api, payload, force) {\n    updateAxisPointer(this, axisModel, ecModel, api, payload, false);\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n    AxisView.superApply(this, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    disposeAxisPointer(this, api);\n    AxisView.superApply(this, 'dispose', arguments);\n  }\n});\n\nfunction updateAxisPointer(axisView, axisModel, ecModel, api, payload, forceRender) {\n  var Clazz = AxisView.getAxisPointerClass(axisView.axisPointerClass);\n\n  if (!Clazz) {\n    return;\n  }\n\n  var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n  axisPointerModel ? (axisView._axisPointer || (axisView._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : disposeAxisPointer(axisView, api);\n}\n\nfunction disposeAxisPointer(axisView, ecModel, api) {\n  var axisPointer = axisView._axisPointer;\n  axisPointer && axisPointer.dispose(ecModel, api);\n  axisView._axisPointer = null;\n}\n\nvar axisPointerClazz = [];\n\nAxisView.registerAxisPointerClass = function (type, clazz) {\n  axisPointerClazz[type] = clazz;\n};\n\nAxisView.getAxisPointerClass = function (type) {\n  return type && axisPointerClazz[type];\n};\n\nvar _default = AxisView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n *\n * @param {Object} opt {labelInside}\n * @return {Object} {\n *  position, rotation, labelDirection, labelOffset,\n *  tickDirection, labelRotate, z2\n * }\n */\nfunction layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n  if (axisModel.get('axisTick.inside')) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get('axisLabel.inside'))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get('axisLabel.rotate');\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\n\nexports.layout = layout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} {point: [x, y], el: ...} point Will not be null.\n */\nfunction _default(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n      return data.mapDimension(dim);\n    }), dataIndex, true)) || [];\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nfunction register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}\n\nexports.register = register;\nexports.unregister = unregister;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Model} axisPointerModel\n */\nfunction buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\n\nfunction buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get('label.precision'),\n    formatter: axisPointerModel.get('label.formatter')\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get('axisLine.lineStyle.color');\n  }\n\n  elOption.label = {\n    shape: {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n      r: labelModel.get('borderRadius')\n    },\n    position: position.slice(),\n    // TODO: rich\n    style: {\n      text: text,\n      textFont: font,\n      textFill: labelModel.getTextColor(),\n      textPosition: 'inside',\n      textPadding: paddings,\n      fill: bgColor,\n      stroke: labelModel.get('borderColor') || 'transparent',\n      lineWidth: labelModel.get('borderWidth') || 0,\n      shadowBlur: labelModel.get('shadowBlur'),\n      shadowColor: labelModel.get('shadowColor'),\n      shadowOffsetX: labelModel.get('shadowOffsetX'),\n      shadowOffsetY: labelModel.get('shadowOffsetY')\n    },\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n/**\n * @param {number} value\n * @param {module:echarts/coord/Axis} axis\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} opt\n * @param {Array.<Object>} seriesDataIndices\n * @param {number|string} opt.precision 'auto' or a number\n * @param {string|Function} opt.formatter label formatter\n */\n\n\nfunction getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel( // If `precision` is set, width can be fixed (like '12.00500'), which\n  // helps to debounce when when moving label.\n  value, {\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params = {\n      value: axisHelper.getAxisRawValue(axis, value),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params);\n    }\n  }\n\n  return text;\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @param {number} value\n * @param {Object} layoutInfo {\n *  rotation, position, labelOffset, labelDirection, labelMargin\n * }\n */\n\n\nfunction getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\n\nfunction buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get('label.margin');\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\n/**\n * @param {Array.<number>} p1\n * @param {Array.<number>} p2\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\n/**\n * @param {Array.<number>} xy\n * @param {Array.<number>} wh\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\n\nfunction makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}\n\nexports.buildElStyle = buildElStyle;\nexports.buildLabelElOption = buildLabelElOption;\nexports.getValueLabel = getValueLabel;\nexports.getTransformedPosition = getTransformedPosition;\nexports.buildCartesianSingleLabelElOption = buildCartesianSingleLabelElOption;\nexports.makeLineShape = makeLineShape;\nexports.makeRectShape = makeRectShape;\nexports.makeSectorShape = makeSectorShape;","/*!\n* screenfull\n* v5.2.0 - 2021-11-03\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (element, options) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telement = element || document.documentElement;\n\n\t\t\t\tvar returnPromise = element[fn.requestFullscreen](options);\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenEntered).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\n\t\t\t\tvar returnPromise = document[fn.exitFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenExit).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (element, options) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(element, options);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = {isEnabled: false};\n\t\t} else {\n\t\t\twindow.screenfull = {isEnabled: false};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tisEnabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./line/LineSeries\");\n\nrequire(\"./line/LineView\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar layoutPoints = require(\"../layout/points\");\n\nvar dataSample = require(\"../processor/dataSample\");\n\nrequire(\"../component/gridSimple\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// In case developer forget to include grid component\necharts.registerVisual(visualSymbol('line', 'circle', 'line'));\necharts.registerLayout(layoutPoints('line')); // Down sample after filter\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = SeriesModel.extend({\n  type: 'series.line',\n  dependencies: ['grid', 'polar'],\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this, {\n      useEncodeDefaulter: true\n    });\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // stack: null\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // If clip the overflow value\n    clip: true,\n    // cursor: null,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _bbox = require(\"zrender/lib/core/bbox\");\n\nvar fromPoints = _bbox.fromPoints;\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar SymbolClz = require(\"../helper/Symbol\");\n\nvar lineAnimationDiff = require(\"./lineAnimationDiff\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _poly = require(\"./poly\");\n\nvar Polyline = _poly.Polyline;\nvar Polygon = _poly.Polygon;\n\nvar ChartView = require(\"../../view/Chart\");\n\nvar _helper = require(\"./helper\");\n\nvar prepareDataCoordInfo = _helper.prepareDataCoordInfo;\nvar getStackedOnPoint = _helper.getStackedOnPoint;\n\nvar _createClipPathFromCoordSys = require(\"../helper/createClipPathFromCoordSys\");\n\nvar createGridClipPath = _createClipPathFromCoordSys.createGridClipPath;\nvar createPolarClipPath = _createClipPathFromCoordSys.createPolarClipPath;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME step not support polar\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n\n  for (var i = 0; i < points1.length; i++) {\n    var p1 = points1[i];\n    var p2 = points2[i];\n\n    if (p1[0] !== p2[0] || p1[1] !== p2[1]) {\n      return;\n    }\n  }\n\n  return true;\n}\n\nfunction getBoundingDiff(points1, points2) {\n  var min1 = [];\n  var max1 = [];\n  var min2 = [];\n  var max2 = [];\n  fromPoints(points1, min1, max1);\n  fromPoints(points2, min2, max2); // Get a max value from each corner of two boundings.\n\n  return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\n}\n\nfunction getSmooth(smooth) {\n  return typeof smooth === 'number' ? smooth : smooth ? 0.5 : 0;\n}\n/**\n * @param {module:echarts/coord/cartesian/Cartesian2D|module:echarts/coord/polar/Polar} coordSys\n * @param {module:echarts/data/List} data\n * @param {Object} dataCoordInfo\n * @param {Array.<Array.<number>>} points\n */\n\n\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n\n  var points = [];\n\n  for (var idx = 0, len = data.count(); idx < len; idx++) {\n    points.push(getStackedOnPoint(dataCoordInfo, coordSys, data, idx));\n  }\n\n  return points;\n}\n\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n\n  for (var i = 0; i < points.length - 1; i++) {\n    var nextPt = points[i + 1];\n    var pt = points[i];\n    stepPoints.push(pt);\n    var stepPt = [];\n\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n        break;\n\n      case 'middle':\n        // default is start\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt);\n        stepPoints.push(stepPt2);\n        break;\n\n      default:\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n    }\n  } // Last points\n\n\n  points[i] && stepPoints.push(points[i]);\n  return stepPoints;\n}\n\nfunction getVisualGradient(data, coordSys) {\n  var visualMetaList = data.getVisual('visualMeta');\n\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n\n  if (coordSys.type !== 'cartesian2d') {\n    return;\n  }\n\n  var coordDim;\n  var visualMeta;\n\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimIndex = visualMetaList[i].dimension;\n    var dimName = data.dimensions[dimIndex];\n    var dimInfo = data.getDimensionInfo(dimName);\n    coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n\n  if (!visualMeta) {\n    return;\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n\n\n  var axis = coordSys.getAxis(coordDim); // dataToCoor mapping may not be linear, but must be monotonic.\n\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n\n  var tinyExtent = 10; // Arbitrary value: 10px\n\n  var minCoord = colorStops[0].coord - tinyExtent;\n  var maxCoord = colorStops[stopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n\n  zrUtil.each(colorStops, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStops.push({\n    offset: stopLen ? colorStops[stopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStops.unshift({\n    // notice colorStops.length have been changed.\n    offset: stopLen ? colorStops[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  }); // zrUtil.each(colorStops, function (colorStop) {\n  //     // Make sure each offset has rounded px to avoid not sharp edge\n  //     colorStop.offset = (Math.round(colorStop.offset * (end - start) + start) - start) / (end - start);\n  // });\n\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStops, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\n\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n  if (!categoryAxis) {\n    return;\n  } // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n\n\n  if (isAuto // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  } // Otherwise follow the label interval strategy on category axis.\n\n\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    labelMap[labelItem.tickValue] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\n\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In mose cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction createLineClipPath(coordSys, hasAnimation, seriesModel) {\n  if (coordSys.type === 'cartesian2d') {\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel); // Expand clip shape to avoid clipping when line value exceeds axis\n\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    }\n\n    return clipPath;\n  } else {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\n\nvar _default = ChartView.extend({\n  type: 'line',\n  init: function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n  },\n  render: function (seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.mapArray(data.getItemLayout);\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    }); // Remove previous created symbols if showSymbol changed to false\n\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n\n    group.add(lineGroup); // FIXME step not support polar\n\n    var step = !isCoordSysPolar && seriesModel.get('step');\n    var clipShapeForSymbol;\n\n    if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n      clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r1 += 0.5;\n      }\n    }\n\n    this._clipShapeForSymbol = clipShapeForSymbol; // Initialization animation or coordinate system changed\n\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol\n      });\n\n      if (step) {\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, coordSys, step);\n        stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n      }\n\n      polyline = this._newPolyline(points, coordSys, hasAnimation);\n\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      }\n\n      lineGroup.setClipPath(createLineClipPath(coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      } // Update clipPath\n\n\n      lineGroup.setClipPath(createLineClipPath(coordSys, false, seriesModel)); // Always update, or it is wrong in the case turning on legend\n      // because points are not changed\n\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol\n      }); // Stop symbol animation and sync with line points\n      // FIXME performance?\n\n      data.eachItemGraphicEl(function (el) {\n        el.stopAnimation(true);\n      }); // In the case data zoom triggerred refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing\n\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._updateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, coordSys, step);\n            stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n          }\n\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n\n    var visualColor = getVisualGradient(data, coordSys) || data.getVisual('color');\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    var smooth = seriesModel.get('smooth');\n    smooth = getSmooth(seriesModel.get('smooth'));\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: seriesModel.get('smoothMonotone'),\n      connectNulls: seriesModel.get('connectNulls')\n    });\n\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel'\n      }));\n\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: seriesModel.get('smoothMonotone'),\n        connectNulls: seriesModel.get('connectNulls')\n      });\n    }\n\n    this._data = data; // Save the coordinate system for transition animation when data changed\n\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n  },\n  dispose: function () {},\n  highlight: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var pt = data.getItemLayout(dataIndex);\n\n        if (!pt) {\n          // Null data\n          return;\n        } // fix #11360: should't draw symbol outside clipShapeForSymbol\n\n\n        if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(pt[0], pt[1])) {\n          return;\n        }\n\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.position = pt;\n        symbol.setZ(seriesModel.get('zlevel'), seriesModel.get('z'));\n        symbol.ignore = isNaN(pt[0]) || isNaN(pt[1]);\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n  downplay: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolyline: function (points) {\n    var polyline = this._polyline; // Remove previous created polyline\n\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n\n    polyline = new Polyline({\n      shape: {\n        points: points\n      },\n      silent: true,\n      z2: 10\n    });\n\n    this._lineGroup.add(polyline);\n\n    this._polyline = polyline;\n    return polyline;\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} stackedOnPoints\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolygon: function (points, stackedOnPoints) {\n    var polygon = this._polygon; // Remove previous created polygon\n\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n\n    polygon = new Polygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      silent: true\n    });\n\n    this._lineGroup.add(polygon);\n\n    this._polygon = polygon;\n    return polygon;\n  },\n\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n  _updateAnimation: function (data, stackedOnPoints, coordSys, api, step, valueOrigin) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n\n    if (step) {\n      // TODO If stacked series is not step\n      current = turnPointsIntoStep(diff.current, coordSys, step);\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\n      next = turnPointsIntoStep(diff.next, coordSys, step);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\n    } // Don't apply animation if diff is large.\n    // For better result and avoid memory explosion problems like\n    // https://github.com/apache/incubator-echarts/issues/12229\n\n\n    if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\n      polyline.setShape({\n        points: next\n      });\n\n      if (polygon) {\n        polygon.setShape({\n          points: next,\n          stackedOnPoints: stackedOnNext\n        });\n      }\n\n      return;\n    } // `diff.current` is subset of `current` (which should be ensured by\n    // turnPointsIntoStep), so points in `__points` can be updated when\n    // points in `current` are update during animation.\n\n\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    graphic.updateProps(polyline, {\n      shape: {\n        points: next\n      }\n    }, seriesModel);\n\n    if (polygon) {\n      polygon.setShape({\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      graphic.updateProps(polygon, {\n        shape: {\n          points: next,\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel);\n    }\n\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n\n          });\n        }\n      }\n    }\n\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          el.attr('position', polyline.shape.__points[updatedDataInfo[i].ptIdx]);\n        }\n      });\n    }\n  },\n  remove: function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n\n    this._lineGroup.removeAll();\n\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._data = null;\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar SymbolClz = require(\"./Symbol\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/SymbolDraw\n */\n\n/**\n * @constructor\n * @alias module:echarts/chart/helper/SymbolDraw\n * @param {module:zrender/graphic/Group} [symbolCtor]\n */\nfunction SymbolDraw(symbolCtor) {\n  this.group = new graphic.Group();\n  this._symbolCtor = symbolCtor || SymbolClz;\n}\n\nvar symbolDrawProto = SymbolDraw.prototype;\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} [opt] Or isIgnore\n * @param {Function} [opt.isIgnore]\n * @param {Object} [opt.clipShape]\n */\n\n\nsymbolDrawProto.updateData = function (data, opt) {\n  opt = normalizeUpdateOpt(opt);\n  var group = this.group;\n  var seriesModel = data.hostModel;\n  var oldData = this._data;\n  var SymbolCtor = this._symbolCtor;\n  var seriesScope = makeSeriesScope(data); // There is no oldLineData only when first rendering or switching from\n  // stream mode to normal mode, where previous elements should be removed.\n\n  if (!oldData) {\n    group.removeAll();\n  }\n\n  data.diff(oldData).add(function (newIdx) {\n    var point = data.getItemLayout(newIdx);\n\n    if (symbolNeedsDraw(data, point, newIdx, opt)) {\n      var symbolEl = new SymbolCtor(data, newIdx, seriesScope);\n      symbolEl.attr('position', point);\n      data.setItemGraphicEl(newIdx, symbolEl);\n      group.add(symbolEl);\n    }\n  }).update(function (newIdx, oldIdx) {\n    var symbolEl = oldData.getItemGraphicEl(oldIdx);\n    var point = data.getItemLayout(newIdx);\n\n    if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n      group.remove(symbolEl);\n      return;\n    }\n\n    if (!symbolEl) {\n      symbolEl = new SymbolCtor(data, newIdx);\n      symbolEl.attr('position', point);\n    } else {\n      symbolEl.updateData(data, newIdx, seriesScope);\n      graphic.updateProps(symbolEl, {\n        position: point\n      }, seriesModel);\n    } // Add back\n\n\n    group.add(symbolEl);\n    data.setItemGraphicEl(newIdx, symbolEl);\n  }).remove(function (oldIdx) {\n    var el = oldData.getItemGraphicEl(oldIdx);\n    el && el.fadeOut(function () {\n      group.remove(el);\n    });\n  }).execute();\n  this._data = data;\n};\n\nsymbolDrawProto.isPersistent = function () {\n  return true;\n};\n\nsymbolDrawProto.updateLayout = function () {\n  var data = this._data;\n\n  if (data) {\n    // Not use animation\n    data.eachItemGraphicEl(function (el, idx) {\n      var point = data.getItemLayout(idx);\n      el.attr('position', point);\n    });\n  }\n};\n\nsymbolDrawProto.incrementalPrepareUpdate = function (data) {\n  this._seriesScope = makeSeriesScope(data);\n  this._data = null;\n  this.group.removeAll();\n};\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} [opt] Or isIgnore\n * @param {Function} [opt.isIgnore]\n * @param {Object} [opt.clipShape]\n */\n\n\nsymbolDrawProto.incrementalUpdate = function (taskParams, data, opt) {\n  opt = normalizeUpdateOpt(opt);\n\n  function updateIncrementalAndHover(el) {\n    if (!el.isGroup) {\n      el.incremental = el.useHoverLayer = true;\n    }\n  }\n\n  for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n    var point = data.getItemLayout(idx);\n\n    if (symbolNeedsDraw(data, point, idx, opt)) {\n      var el = new this._symbolCtor(data, idx, this._seriesScope);\n      el.traverse(updateIncrementalAndHover);\n      el.attr('position', point);\n      this.group.add(el);\n      data.setItemGraphicEl(idx, el);\n    }\n  }\n};\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nsymbolDrawProto.remove = function (enableAnimation) {\n  var group = this.group;\n  var data = this._data; // Incremental model do not have this._data.\n\n  if (data && enableAnimation) {\n    data.eachItemGraphicEl(function (el) {\n      el.fadeOut(function () {\n        group.remove(el);\n      });\n    });\n  } else {\n    group.removeAll();\n  }\n};\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  return {\n    itemStyle: seriesModel.getModel('itemStyle').getItemStyle(['color']),\n    hoverItemStyle: seriesModel.getModel('emphasis.itemStyle').getItemStyle(),\n    symbolRotate: seriesModel.get('symbolRotate'),\n    symbolOffset: seriesModel.get('symbolOffset'),\n    hoverAnimation: seriesModel.get('hoverAnimation'),\n    labelModel: seriesModel.getModel('label'),\n    hoverLabelModel: seriesModel.getModel('emphasis.label'),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar _default = SymbolDraw;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {string} label string. Not null/undefined\n */\nfunction getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimension('defaultedLabel', true);\n  var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n  if (len === 1) {\n    return retrieveRawValue(data, dataIndex, labelDims[0]);\n  } else if (len) {\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      var val = retrieveRawValue(data, dataIndex, labelDims[i]);\n      vals.push(val);\n    }\n\n    return vals.join(' ');\n  }\n}\n\nexports.getDefaultLabel = getDefaultLabel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _helper = require(\"./helper\");\n\nvar prepareDataCoordInfo = _helper.prepareDataCoordInfo;\nvar getStackedOnPoint = _helper.getStackedOnPoint;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// var arrayDiff = require('zrender/src/core/arrayDiff');\n// 'zrender/src/core/arrayDiff' has been used before, but it did\n// not do well in performance when roam with fixed dataZoom window.\n// function convertToIntId(newIdList, oldIdList) {\n//     // Generate int id instead of string id.\n//     // Compare string maybe slow in score function of arrDiff\n//     // Assume id in idList are all unique\n//     var idIndicesMap = {};\n//     var idx = 0;\n//     for (var i = 0; i < newIdList.length; i++) {\n//         idIndicesMap[newIdList[i]] = idx;\n//         newIdList[i] = idx++;\n//     }\n//     for (var i = 0; i < oldIdList.length; i++) {\n//         var oldId = oldIdList[i];\n//         // Same with newIdList\n//         if (idIndicesMap[oldId]) {\n//             oldIdList[i] = idIndicesMap[oldId];\n//         }\n//         else {\n//             oldIdList[i] = idx++;\n//         }\n//     }\n// }\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\n\nfunction _default(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData); // var newIdList = newData.mapArray(newData.getId);\n  // var oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n\n  var currPoints = [];\n  var nextPoints = []; // Points for stacking base line\n\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin);\n  var oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true; // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n\n    switch (diffItem.cmd) {\n      case '=':\n        var currentPt = oldData.getItemLayout(diffItem.idx);\n        var nextPt = newData.getItemLayout(diffItem.idx1); // If previous data is NaN, use next point directly\n\n        if (isNaN(currentPt[0]) || isNaN(currentPt[1])) {\n          currentPt = nextPt.slice();\n        }\n\n        currPoints.push(currentPt);\n        nextPoints.push(nextPt);\n        currStackedPoints.push(oldStackedOnPoints[diffItem.idx]);\n        nextStackedPoints.push(newStackedOnPoints[diffItem.idx1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n\n      case '+':\n        var idx = diffItem.idx;\n        currPoints.push(oldCoordSys.dataToPoint([newData.get(newDataOldCoordInfo.dataDimsForPoint[0], idx), newData.get(newDataOldCoordInfo.dataDimsForPoint[1], idx)]));\n        nextPoints.push(newData.getItemLayout(idx).slice());\n        currStackedPoints.push(getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, idx));\n        nextStackedPoints.push(newStackedOnPoints[idx]);\n        rawIndices.push(newData.getRawIndex(idx));\n        break;\n\n      case '-':\n        var idx = diffItem.idx;\n        var rawIndex = oldData.getRawIndex(idx); // Data is replaced. In the case of dynamic data queue\n        // FIXME FIXME FIXME\n\n        if (rawIndex !== idx) {\n          currPoints.push(oldData.getItemLayout(idx));\n          nextPoints.push(newCoordSys.dataToPoint([oldData.get(oldDataNewCoordInfo.dataDimsForPoint[0], idx), oldData.get(oldDataNewCoordInfo.dataDimsForPoint[1], idx)]));\n          currStackedPoints.push(oldStackedOnPoints[idx]);\n          nextStackedPoints.push(getStackedOnPoint(oldDataNewCoordInfo, newCoordSys, oldData, idx));\n          rawIndices.push(rawIndex);\n        } else {\n          pointAdded = false;\n        }\n\n    } // Original indices\n\n\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  } // Diff result may be crossed if all items are changed\n  // Sort by data index\n\n\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var sortedCurrPoints = [];\n  var sortedNextPoints = [];\n  var sortedCurrStackedPoints = [];\n  var sortedNextStackedPoints = [];\n  var sortedStatus = [];\n\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    sortedCurrPoints[i] = currPoints[idx];\n    sortedNextPoints[i] = nextPoints[idx];\n    sortedCurrStackedPoints[i] = currStackedPoints[idx];\n    sortedNextStackedPoints[i] = nextStackedPoints[idx];\n    sortedStatus[i] = status[idx];\n  }\n\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar fixClipWithShadow = require(\"zrender/lib/graphic/helper/fixClipWithShadow\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Poly path support NaN point\nvar vec2Min = vec2.min;\nvar vec2Max = vec2.max;\nvar scaleAndAdd = vec2.scaleAndAdd;\nvar v2Copy = vec2.copy; // Temporary variable\n\nvar v = [];\nvar cp0 = [];\nvar cp1 = [];\n\nfunction isPointNull(p) {\n  return isNaN(p[0]) || isNaN(p[1]);\n}\n\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  // if (smoothMonotone == null) {\n  //     if (isMono(points, 'x')) {\n  //         return drawMono(ctx, points, start, segLen, allLen,\n  //             dir, smoothMin, smoothMax, smooth, 'x', connectNulls);\n  //     }\n  //     else if (isMono(points, 'y')) {\n  //         return drawMono(ctx, points, start, segLen, allLen,\n  //             dir, smoothMin, smoothMax, smooth, 'y', connectNulls);\n  //     }\n  //     else {\n  //         return drawNonMono.apply(this, arguments);\n  //     }\n  // }\n  // else if (smoothMonotone !== 'none' && isMono(points, smoothMonotone)) {\n  //     return drawMono.apply(this, arguments);\n  // }\n  // else {\n  //     return drawNonMono.apply(this, arguments);\n  // }\n  if (smoothMonotone === 'none' || !smoothMonotone) {\n    return drawNonMono.apply(this, arguments);\n  } else {\n    return drawMono.apply(this, arguments);\n  }\n}\n/**\n * Check if points is in monotone.\n *\n * @param {number[][]} points         Array of points which is in [x, y] form\n * @param {string}     smoothMonotone 'x', 'y', or 'none', stating for which\n *                                    dimension that is checking.\n *                                    If is 'none', `drawNonMono` should be\n *                                    called.\n *                                    If is undefined, either being monotone\n *                                    in 'x' or 'y' will call `drawMono`.\n */\n// function isMono(points, smoothMonotone) {\n//     if (points.length <= 1) {\n//         return true;\n//     }\n//     var dim = smoothMonotone === 'x' ? 0 : 1;\n//     var last = points[0][dim];\n//     var lastDiff = 0;\n//     for (var i = 1; i < points.length; ++i) {\n//         var diff = points[i][dim] - last;\n//         if (!isNaN(diff) && !isNaN(lastDiff)\n//             && diff !== 0 && lastDiff !== 0\n//             && ((diff >= 0) !== (lastDiff >= 0))\n//         ) {\n//             return false;\n//         }\n//         if (!isNaN(diff) && diff !== 0) {\n//             lastDiff = diff;\n//             last = points[i][dim];\n//         }\n//     }\n//     return true;\n// }\n\n/**\n * Draw smoothed line in monotone, in which only vertical or horizontal bezier\n * control points will be used. This should be used when points are monotone\n * either in x or y dimension.\n */\n\n\nfunction drawMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n    } else {\n      if (smooth > 0) {\n        var prevP = points[prevIdx];\n        var dim = smoothMonotone === 'y' ? 1 : 0; // Length of control point to p, either in x or y, but not both\n\n        var ctrlLen = (p[dim] - prevP[dim]) * smooth;\n        v2Copy(cp0, prevP);\n        cp0[dim] = prevP[dim] + ctrlLen;\n        v2Copy(cp1, p);\n        cp1[dim] = p[dim] - ctrlLen;\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n/**\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n * situations. This should be used when points are non-monotone neither in x or\n * y dimension.\n */\n\n\nfunction drawNonMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n      v2Copy(cp0, p);\n    } else {\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextP = points[nextIdx];\n\n        if (connectNulls) {\n          // Find next point not null\n          while (nextP && isPointNull(points[nextIdx])) {\n            nextIdx += dir;\n            nextP = points[nextIdx];\n          }\n        }\n\n        var ratioNextSeg = 0.5;\n        var prevP = points[prevIdx];\n        var nextP = points[nextIdx]; // Last point\n\n        if (!nextP || isPointNull(nextP)) {\n          v2Copy(cp1, p);\n        } else {\n          // If next data is null in not connect case\n          if (isPointNull(nextP) && !connectNulls) {\n            nextP = p;\n          }\n\n          vec2.sub(v, nextP, prevP);\n          var lenPrevSeg;\n          var lenNextSeg;\n\n          if (smoothMonotone === 'x' || smoothMonotone === 'y') {\n            var dim = smoothMonotone === 'x' ? 0 : 1;\n            lenPrevSeg = Math.abs(p[dim] - prevP[dim]);\n            lenNextSeg = Math.abs(p[dim] - nextP[dim]);\n          } else {\n            lenPrevSeg = vec2.dist(p, prevP);\n            lenNextSeg = vec2.dist(p, nextP);\n          } // Use ratio of seg length\n\n\n          ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n          scaleAndAdd(cp1, p, v, -smooth * (1 - ratioNextSeg));\n        } // Smooth constraint\n\n\n        vec2Min(cp0, cp0, smoothMax);\n        vec2Max(cp0, cp0, smoothMin);\n        vec2Min(cp1, cp1, smoothMax);\n        vec2Max(cp1, cp1, smoothMin);\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]); // cp0 of next segment\n\n        scaleAndAdd(cp0, p, v, smooth * ratioNextSeg);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n\nfunction getBoundingBox(points, smoothConstraint) {\n  var ptMin = [Infinity, Infinity];\n  var ptMax = [-Infinity, -Infinity];\n\n  if (smoothConstraint) {\n    for (var i = 0; i < points.length; i++) {\n      var pt = points[i];\n\n      if (pt[0] < ptMin[0]) {\n        ptMin[0] = pt[0];\n      }\n\n      if (pt[1] < ptMin[1]) {\n        ptMin[1] = pt[1];\n      }\n\n      if (pt[0] > ptMax[0]) {\n        ptMax[0] = pt[0];\n      }\n\n      if (pt[1] > ptMax[1]) {\n        ptMax[1] = pt[1];\n      }\n    }\n  }\n\n  return {\n    min: smoothConstraint ? ptMin : ptMax,\n    max: smoothConstraint ? ptMax : ptMin\n  };\n}\n\nvar Polyline = Path.extend({\n  type: 'ec-polyline',\n  shape: {\n    points: [],\n    smooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  style: {\n    fill: null,\n    stroke: '#000'\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length;\n    var result = getBoundingBox(points, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, result.min, result.max, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  }\n});\nvar Polygon = Path.extend({\n  type: 'ec-polygon',\n  shape: {\n    points: [],\n    // Offset between stacked base points and points\n    stackedOnPoints: [],\n    smooth: 0,\n    stackedOnSmooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length;\n    var smoothMonotone = shape.smoothMonotone;\n    var bbox = getBoundingBox(points, shape.smoothConstraint);\n    var stackedOnBBox = getBoundingBox(stackedOnPoints, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, bbox.min, bbox.max, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, stackedOnBBox.min, stackedOnBBox.max, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  }\n});\nexports.Polyline = Polyline;\nexports.Polygon = Polygon;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar round = _number.round;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel) {\n  var rect = cartesian.getArea();\n  var isHorizontal = cartesian.getBaseAxis().isHorizontal();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get('lineStyle.width') || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth; // fix: https://github.com/apache/incubator-echarts/issues/11369\n\n  x = Math.floor(x);\n  width = Math.round(width);\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape[isHorizontal ? 'width' : 'height'] = 0;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: round(sectorArea.r0, 1),\n      r: round(sectorArea.r, 1),\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape.endAngle = sectorArea.startAngle;\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipPath(coordSys, hasAnimation, seriesModel) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel);\n  }\n\n  return null;\n}\n\nexports.createGridClipPath = createGridClipPath;\nexports.createPolarClipPath = createPolarClipPath;\nexports.createClipPath = createClipPath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isFunction = _util.isFunction;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType, defaultSymbolType, legendSymbol) {\n  // Encoding visual for all series include which is filtered for legend drawing\n  return {\n    seriesType: seriesType,\n    // For legend.\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var symbolType = seriesModel.get('symbol');\n      var symbolSize = seriesModel.get('symbolSize');\n      var keepAspect = seriesModel.get('symbolKeepAspect');\n      var symbolRotate = seriesModel.get('symbolRotate');\n      var hasSymbolTypeCallback = isFunction(symbolType);\n      var hasSymbolSizeCallback = isFunction(symbolSize);\n      var hasSymbolRotateCallback = isFunction(symbolRotate);\n      var hasCallback = hasSymbolTypeCallback || hasSymbolSizeCallback || hasSymbolRotateCallback;\n      var seriesSymbol = !hasSymbolTypeCallback && symbolType ? symbolType : defaultSymbolType;\n      var seriesSymbolSize = !hasSymbolSizeCallback ? symbolSize : null;\n      var seriesSymbolRotate = !hasSymbolRotateCallback ? seriesSymbolRotate : null;\n      data.setVisual({\n        legendSymbol: legendSymbol || seriesSymbol,\n        // If seting callback functions on `symbol` or `symbolSize`, for simplicity and avoiding\n        // to bring trouble, we do not pick a reuslt from one of its calling on data item here,\n        // but just use the default value. Callback on `symbol` or `symbolSize` is convenient in\n        // some cases but generally it is not recommanded.\n        symbol: seriesSymbol,\n        symbolSize: seriesSymbolSize,\n        symbolKeepAspect: keepAspect,\n        symbolRotate: symbolRotate\n      }); // Only visible series has each data be visual encoded\n\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      function dataEach(data, idx) {\n        if (hasCallback) {\n          var rawValue = seriesModel.getRawValue(idx);\n          var params = seriesModel.getDataParams(idx);\n          hasSymbolTypeCallback && data.setItemVisual(idx, 'symbol', symbolType(rawValue, params));\n          hasSymbolSizeCallback && data.setItemVisual(idx, 'symbolSize', symbolSize(rawValue, params));\n          hasSymbolRotateCallback && data.setItemVisual(idx, 'symbolRotate', symbolRotate(rawValue, params));\n        }\n\n        if (data.hasItemOption) {\n          var itemModel = data.getItemModel(idx);\n          var itemSymbolType = itemModel.getShallow('symbol', true);\n          var itemSymbolSize = itemModel.getShallow('symbolSize', true);\n          var itemSymbolRotate = itemModel.getShallow('symbolRotate', true);\n          var itemSymbolKeepAspect = itemModel.getShallow('symbolKeepAspect', true); // If has item symbol\n\n          if (itemSymbolType != null) {\n            data.setItemVisual(idx, 'symbol', itemSymbolType);\n          }\n\n          if (itemSymbolSize != null) {\n            // PENDING Transform symbolSize ?\n            data.setItemVisual(idx, 'symbolSize', itemSymbolSize);\n          }\n\n          if (itemSymbolRotate != null) {\n            data.setItemVisual(idx, 'symbolRotate', itemSymbolRotate);\n          }\n\n          if (itemSymbolKeepAspect != null) {\n            data.setItemVisual(idx, 'symbolKeepAspect', itemSymbolKeepAspect);\n          }\n        }\n      }\n\n      return {\n        dataEach: data.hasItemOption || hasCallback ? dataEach : null\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar map = _util.map;\n\nvar createRenderPlanner = require(\"../chart/helper/createRenderPlanner\");\n\nvar _dataStackHelper = require(\"../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var isLargeRender = pipelineContext.large;\n\n      if (!coordSys) {\n        return;\n      }\n\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n      if (isDimensionStacked(data, dims[0]\n      /*, dims[1]*/\n      )) {\n        dims[0] = stackResultDim;\n      }\n\n      if (isDimensionStacked(data, dims[1]\n      /*, dims[0]*/\n      )) {\n        dims[1] = stackResultDim;\n      }\n\n      function progress(params, data) {\n        var segCount = params.end - params.start;\n        var points = isLargeRender && new Float32Array(segCount * dimLen);\n\n        for (var i = params.start, offset = 0, tmpIn = [], tmpOut = []; i < params.end; i++) {\n          var point;\n\n          if (dimLen === 1) {\n            var x = data.get(dims[0], i);\n            point = !isNaN(x) && coordSys.dataToPoint(x, null, tmpOut);\n          } else {\n            var x = tmpIn[0] = data.get(dims[0], i);\n            var y = tmpIn[1] = data.get(dims[1], i); // Also {Array.<number>}, not undefined to avoid if...else... statement\n\n            point = !isNaN(x) && !isNaN(y) && coordSys.dataToPoint(tmpIn, null, tmpOut);\n          }\n\n          if (isLargeRender) {\n            points[offset++] = point ? point[0] : NaN;\n            points[offset++] = point ? point[1] : NaN;\n          } else {\n            data.setItemLayout(i, point && point.slice() || [NaN, NaN]);\n          }\n        }\n\n        isLargeRender && data.setLayout('symbolPoints', points);\n      }\n\n      return dimLen && {\n        progress: progress\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function (frame, value) {\n  return Math.round(frame.length / 2);\n};\n\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem; // Only cartesian2d support down sampling\n\n      if (coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent(); // Coordinste system has been resized\n\n        var size = Math.abs(extent[1] - extent[0]);\n        var rate = Math.round(data.count() / size);\n\n        if (rate > 1) {\n          var sampler;\n\n          if (typeof sampling === 'string') {\n            sampler = samplers[sampling];\n          } else if (typeof sampling === 'function') {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid view\necharts.extendComponentView({\n  type: 'grid',\n  render: function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new graphic.Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: zrUtil.defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  }\n});\necharts.registerPreprocessor(function (option) {\n  // Only create grid when need\n  if (option.xAxis && option.yAxis && !option.grid) {\n    option.grid = {};\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\nvar each = _util.each;\nvar map = _util.map;\nvar indexOf = _util.indexOf;\nvar retrieve = _util.retrieve;\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar createScaleByModel = _axisHelper.createScaleByModel;\nvar ifAxisCrossZero = _axisHelper.ifAxisCrossZero;\nvar niceScaleExtent = _axisHelper.niceScaleExtent;\nvar estimateLabelUnionRect = _axisHelper.estimateLabelUnionRect;\n\nvar Cartesian2D = require(\"./Cartesian2D\");\n\nvar Axis2D = require(\"./Axis2D\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar getStackedDimension = _dataStackHelper.getStackedDimension;\n\nrequire(\"./GridModel\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\n// Depends on GridModel, AxisModel, which performs preprocess.\n\n/**\n * Check if the axis is used in the specified grid\n * @inner\n */\nfunction isAxisUsedInTheGrid(axisModel, gridModel, ecModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction Grid(gridModel, ecModel, api) {\n  /**\n   * @type {Object.<string, module:echarts/coord/cartesian/Cartesian2D>}\n   * @private\n   */\n  this._coordsMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Cartesian>}\n   * @private\n   */\n\n  this._coordsList = [];\n  /**\n   * @type {Object.<string, Array.<module:echarts/coord/cartesian/Axis2D>>}\n   * @private\n   */\n\n  this._axesMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Axis2D>}\n   * @private\n   */\n\n  this._axesList = [];\n\n  this._initCartesian(gridModel, ecModel, api);\n\n  this.model = gridModel;\n}\n\nvar gridProto = Grid.prototype;\ngridProto.type = 'grid';\ngridProto.axisPointerEnabled = true;\n\ngridProto.getRect = function () {\n  return this._rect;\n};\n\ngridProto.update = function (ecModel, api) {\n  var axesMap = this._axesMap;\n\n  this._updateScale(ecModel, this.model);\n\n  each(axesMap.x, function (xAxis) {\n    niceScaleExtent(xAxis.scale, xAxis.model);\n  });\n  each(axesMap.y, function (yAxis) {\n    niceScaleExtent(yAxis.scale, yAxis.model);\n  }); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n  var onZeroRecords = {};\n  each(axesMap.x, function (xAxis) {\n    fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n  });\n  each(axesMap.y, function (yAxis) {\n    fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n  }); // Resize again if containLabel is enabled\n  // FIXME It may cause getting wrong grid size in data processing stage\n\n  this.resize(this.model, api);\n};\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, onZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get('axisLine.onZero');\n  var onZeroAxisIndex = axisModel.get('axisLine.onZeroAxisIndex');\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n/**\n * Resize the grid\n * @param {module:echarts/coord/cartesian/GridModel} gridModel\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\ngridProto.resize = function (gridModel, api, ignoreContainLabel) {\n  var gridRect = getLayoutRect(gridModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n  this._rect = gridRect;\n  var axesList = this._axesList;\n  adjustAxes(); // Minus label size\n\n  if (!ignoreContainLabel && gridModel.get('containLabel')) {\n    each(axesList, function (axis) {\n      if (!axis.model.get('axisLabel.inside')) {\n        var labelUnionRect = estimateLabelUnionRect(axis);\n\n        if (labelUnionRect) {\n          var dim = axis.isHorizontal() ? 'height' : 'width';\n          var margin = axis.model.get('axisLabel.margin');\n          gridRect[dim] -= labelUnionRect[dim] + margin;\n\n          if (axis.position === 'top') {\n            gridRect.y += labelUnionRect.height + margin;\n          } else if (axis.position === 'left') {\n            gridRect.x += labelUnionRect.width + margin;\n          }\n        }\n      }\n    });\n    adjustAxes();\n  }\n\n  function adjustAxes() {\n    each(axesList, function (axis) {\n      var isHorizontal = axis.isHorizontal();\n      var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(extent[idx], extent[1 - idx]);\n      updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n    });\n  }\n};\n/**\n * @param {string} axisType\n * @param {number} [axisIndex]\n */\n\n\ngridProto.getAxis = function (axisType, axisIndex) {\n  var axesMapOnDim = this._axesMap[axisType];\n\n  if (axesMapOnDim != null) {\n    if (axisIndex == null) {\n      // Find first axis\n      for (var name in axesMapOnDim) {\n        if (axesMapOnDim.hasOwnProperty(name)) {\n          return axesMapOnDim[name];\n        }\n      }\n    }\n\n    return axesMapOnDim[axisIndex];\n  }\n};\n/**\n * @return {Array.<module:echarts/coord/Axis>}\n */\n\n\ngridProto.getAxes = function () {\n  return this._axesList.slice();\n};\n/**\n * Usage:\n *      grid.getCartesian(xAxisIndex, yAxisIndex);\n *      grid.getCartesian(xAxisIndex);\n *      grid.getCartesian(null, yAxisIndex);\n *      grid.getCartesian({xAxisIndex: ..., yAxisIndex: ...});\n *\n * @param {number|Object} [xAxisIndex]\n * @param {number} [yAxisIndex]\n */\n\n\ngridProto.getCartesian = function (xAxisIndex, yAxisIndex) {\n  if (xAxisIndex != null && yAxisIndex != null) {\n    var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n    return this._coordsMap[key];\n  }\n\n  if (isObject(xAxisIndex)) {\n    yAxisIndex = xAxisIndex.yAxisIndex;\n    xAxisIndex = xAxisIndex.xAxisIndex;\n  } // When only xAxisIndex or yAxisIndex given, find its first cartesian.\n\n\n  for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n    if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n      return coordList[i];\n    }\n  }\n};\n\ngridProto.getCartesians = function () {\n  return this._coordsList.slice();\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertToPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertFromPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n};\n/**\n * @inner\n */\n\n\ngridProto._findConvertTarget = function (ecModel, finder) {\n  var seriesModel = finder.seriesModel;\n  var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis')[0];\n  var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis')[0];\n  var gridModel = finder.gridModel;\n  var coordsList = this._coordsList;\n  var cartesian;\n  var axis;\n\n  if (seriesModel) {\n    cartesian = seriesModel.coordinateSystem;\n    indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n  } else if (xAxisModel && yAxisModel) {\n    cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  } else if (xAxisModel) {\n    axis = this.getAxis('x', xAxisModel.componentIndex);\n  } else if (yAxisModel) {\n    axis = this.getAxis('y', yAxisModel.componentIndex);\n  } // Lowest priority.\n  else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n\n  return {\n    cartesian: cartesian,\n    axis: axis\n  };\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.containPoint = function (point) {\n  var coord = this._coordsList[0];\n\n  if (coord) {\n    return coord.containPoint(point);\n  }\n};\n/**\n * Initialize cartesian coordinate systems\n * @private\n */\n\n\ngridProto._initCartesian = function (gridModel, ecModel, api) {\n  var axisPositionUsed = {\n    left: false,\n    right: false,\n    top: false,\n    bottom: false\n  };\n  var axesMap = {\n    x: {},\n    y: {}\n  };\n  var axesCount = {\n    x: 0,\n    y: 0\n  }; /// Create axis\n\n  ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n  ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n  if (!axesCount.x || !axesCount.y) {\n    // Roll back when there no either x or y axis\n    this._axesMap = {};\n    this._axesList = [];\n    return;\n  }\n\n  this._axesMap = axesMap; /// Create cartesian2d\n\n  each(axesMap.x, function (xAxis, xAxisIndex) {\n    each(axesMap.y, function (yAxis, yAxisIndex) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      var cartesian = new Cartesian2D(key);\n      cartesian.grid = this;\n      cartesian.model = gridModel;\n      this._coordsMap[key] = cartesian;\n\n      this._coordsList.push(cartesian);\n\n      cartesian.addAxis(xAxis);\n      cartesian.addAxis(yAxis);\n    }, this);\n  }, this);\n\n  function createAxisCreator(axisType) {\n    return function (axisModel, idx) {\n      if (!isAxisUsedInTheGrid(axisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var axisPosition = axisModel.get('position');\n\n      if (axisType === 'x') {\n        // Fix position\n        if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n          // Default bottom of X\n          axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n        }\n      } else {\n        // Fix position\n        if (axisPosition !== 'left' && axisPosition !== 'right') {\n          // Default left of Y\n          axisPosition = axisPositionUsed.left ? 'right' : 'left';\n        }\n      }\n\n      axisPositionUsed[axisPosition] = true;\n      var axis = new Axis2D(axisType, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n      axisModel.axis = axis; // Inject axisModel into axis\n\n      axis.model = axisModel; // Inject grid info axis\n\n      axis.grid = this; // Index of axis, can be used as key\n\n      axis.index = idx;\n\n      this._axesList.push(axis);\n\n      axesMap[axisType][idx] = axis;\n      axesCount[axisType]++;\n    };\n  }\n};\n/**\n * Update cartesian properties from series\n * @param  {module:echarts/model/Option} option\n * @private\n */\n\n\ngridProto._updateScale = function (ecModel, gridModel) {\n  // Reset scale\n  each(this._axesList, function (axis) {\n    axis.scale.setExtent(Infinity, -Infinity);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (isCartesian2D(seriesModel)) {\n      var axesModels = findAxesModels(seriesModel, ecModel);\n      var xAxisModel = axesModels[0];\n      var yAxisModel = axesModels[1];\n\n      if (!isAxisUsedInTheGrid(xAxisModel, gridModel, ecModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      var data = seriesModel.getData();\n      var xAxis = cartesian.getAxis('x');\n      var yAxis = cartesian.getAxis('y');\n\n      if (data.type === 'list') {\n        unionExtent(data, xAxis, seriesModel);\n        unionExtent(data, yAxis, seriesModel);\n      }\n    }\n  }, this);\n\n  function unionExtent(data, axis, seriesModel) {\n    each(data.mapDimension(axis.dim, true), function (dim) {\n      axis.scale.unionExtentFromData( // For example, the extent of the orginal dimension\n      // is [0.1, 0.5], the extent of the `stackResultDimension`\n      // is [7, 9], the final extent should not include [0.1, 0.5].\n      data, getStackedDimension(data, dim));\n    });\n  }\n};\n/**\n * @param {string} [dim] 'x' or 'y' or 'auto' or null/undefined\n * @return {Object} {baseAxes: [], otherAxes: []}\n */\n\n\ngridProto.getTooltipAxes = function (dim) {\n  var baseAxes = [];\n  var otherAxes = [];\n  each(this.getCartesians(), function (cartesian) {\n    var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n    var otherAxis = cartesian.getOtherAxis(baseAxis);\n    indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n    indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n  });\n  return {\n    baseAxes: baseAxes,\n    otherAxes: otherAxes\n  };\n};\n/**\n * @inner\n */\n\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nvar axesTypes = ['xAxis', 'yAxis'];\n/**\n * @inner\n */\n\nfunction findAxesModels(seriesModel, ecModel) {\n  return map(axesTypes, function (axisType) {\n    var axisModel = seriesModel.getReferringComponents(axisType)[0];\n    return axisModel;\n  });\n}\n/**\n * @inner\n */\n\n\nfunction isCartesian2D(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\n\nGrid.create = function (ecModel, api) {\n  var grids = [];\n  ecModel.eachComponent('grid', function (gridModel, idx) {\n    var grid = new Grid(gridModel, ecModel, api);\n    grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n    // should be performed in create stage.\n\n    grid.resize(gridModel, api, true);\n    gridModel.coordinateSystem = grid;\n    grids.push(grid);\n  }); // Inject the coordinateSystems into seriesModel\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (!isCartesian2D(seriesModel)) {\n      return;\n    }\n\n    var axesModels = findAxesModels(seriesModel, ecModel);\n    var xAxisModel = axesModels[0];\n    var yAxisModel = axesModels[1];\n    var gridModel = xAxisModel.getCoordSysModel();\n    var grid = gridModel.coordinateSystem;\n    seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  });\n  return grids;\n}; // For deciding which dimensions to use when creating list data\n\n\nGrid.dimensions = Grid.prototype.dimensions = Cartesian2D.prototype.dimensions;\nCoordinateSystem.register('cartesian2d', Grid);\nvar _default = Grid;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar Cartesian = require(\"./Cartesian\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction Cartesian2D(name) {\n  Cartesian.call(this, name);\n}\n\nCartesian2D.prototype = {\n  constructor: Cartesian2D,\n  type: 'cartesian2d',\n\n  /**\n   * @type {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Base axis will be used on stacking.\n   *\n   * @return {module:echarts/coord/cartesian/Axis2D}\n   */\n  getBaseAxis: function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  },\n\n  /**\n   * If contain point\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  containPoint: function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  },\n\n  /**\n   * If contain data\n   * @param {Array.<number>} data\n   * @return {boolean}\n   */\n  containData: function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, reserved, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(data[0]));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(data[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  clampData: function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} point\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  pointToData: function (point, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]));\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]));\n    return out;\n  },\n\n  /**\n   * Get other axis\n   * @param {module:echarts/coord/cartesian/Axis2D} axis\n   */\n  getOtherAxis: function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  },\n\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   * @return {BoundingRect}\n   */\n  getArea: function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n  }\n};\nzrUtil.inherits(Cartesian2D, Cartesian);\nvar _default = Cartesian2D;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Cartesian coordinate system\n * @module  echarts/coord/Cartesian\n *\n */\nfunction dimAxisMapper(dim) {\n  return this._axes[dim];\n}\n/**\n * @alias module:echarts/coord/Cartesian\n * @constructor\n */\n\n\nvar Cartesian = function (name) {\n  this._axes = {};\n  this._dimList = [];\n  /**\n   * @type {string}\n   */\n\n  this.name = name || '';\n};\n\nCartesian.prototype = {\n  constructor: Cartesian,\n  type: 'cartesian',\n\n  /**\n   * Get axis\n   * @param  {number|string} dim\n   * @return {module:echarts/coord/Cartesian~Axis}\n   */\n  getAxis: function (dim) {\n    return this._axes[dim];\n  },\n\n  /**\n   * Get axes list\n   * @return {Array.<module:echarts/coord/Cartesian~Axis>}\n   */\n  getAxes: function () {\n    return zrUtil.map(this._dimList, dimAxisMapper, this);\n  },\n\n  /**\n   * Get axes list by given scale type\n   */\n  getAxesByScale: function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  },\n\n  /**\n   * Add axis\n   * @param {module:echarts/coord/Cartesian.Axis}\n   */\n  addAxis: function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  },\n\n  /**\n   * Convert data to coord in nd space\n   * @param {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  dataToCoord: function (val) {\n    return this._dataCoordConvert(val, 'dataToCoord');\n  },\n\n  /**\n   * Convert coord in nd space to data\n   * @param  {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  coordToData: function (val) {\n    return this._dataCoordConvert(val, 'coordToData');\n  },\n  _dataCoordConvert: function (input, method) {\n    var dimList = this._dimList;\n    var output = input instanceof Array ? [] : {};\n\n    for (var i = 0; i < dimList.length; i++) {\n      var dim = dimList[i];\n      var axis = this._axes[dim];\n      output[dim] = axis[method](input[dim]);\n    }\n\n    return output;\n  }\n};\nvar _default = Cartesian;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Extend axis 2d\n * @constructor module:echarts/coord/cartesian/Axis2D\n * @extends {module:echarts/coord/cartesian/Axis}\n * @param {string} dim\n * @param {*} scale\n * @param {Array.<number>} coordExtent\n * @param {string} axisType\n * @param {string} position\n */\nvar Axis2D = function (dim, scale, coordExtent, axisType, position) {\n  Axis.call(this, dim, scale, coordExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = axisType || 'value';\n  /**\n   * Axis position\n   *  - 'top'\n   *  - 'bottom'\n   *  - 'left'\n   *  - 'right'\n   */\n\n  this.position = position || 'bottom';\n};\n\nAxis2D.prototype = {\n  constructor: Axis2D,\n\n  /**\n   * Index of axis, can be used as key\n   */\n  index: 0,\n\n  /**\n   * Implemented in <module:echarts/coord/cartesian/Grid>.\n   * @return {Array.<module:echarts/coord/cartesian/Axis2D>}\n   *         If not on zero of other axis, return null/undefined.\n   *         If no axes, return an empty array.\n   */\n  getAxesOnZeroOf: null,\n\n  /**\n   * Axis model\n   * @param {module:echarts/coord/cartesian/AxisModel}\n   */\n  model: null,\n  isHorizontal: function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  },\n\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n  getGlobalExtent: function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  },\n  getOtherAxis: function () {\n    this.grid.getOtherAxis();\n  },\n\n  /**\n   * @override\n   */\n  pointToData: function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  },\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var localCoord = axis.toLocalCoord(80);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toLocalCoord: null,\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var globalCoord = axis.toLocalCoord(40);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toGlobalCoord: null\n};\nzrUtil.inherits(Axis2D, Axis);\nvar _default = Axis2D;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./AxisModel\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid 是在有直角坐标系的时候必须要存在的\n// 所以这里也要被 Cartesian2D 依赖\nvar _default = ComponentModel.extend({\n  type: 'grid',\n  dependencies: ['xAxis', 'yAxis'],\n  layoutMode: 'box',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Grid}\n   */\n  coordinateSystem: null,\n  defaultOption: {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 60,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisDefault = require(\"./axisDefault\");\n\nvar ComponentModel = require(\"../model/Component\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\n\nvar OrdinalMeta = require(\"../data/OrdinalMeta\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME axisType is fixed ?\nvar AXIS_TYPES = ['value', 'category', 'time', 'log'];\n/**\n * Generate sub axis model class\n * @param {string} axisName 'x' 'y' 'radius' 'angle' 'parallel'\n * @param {module:echarts/model/Component} BaseAxisModelClass\n * @param {Function} axisTypeDefaulter\n * @param {Object} [extraDefaultOption]\n */\n\nfunction _default(axisName, BaseAxisModelClass, axisTypeDefaulter, extraDefaultOption) {\n  zrUtil.each(AXIS_TYPES, function (axisType) {\n    BaseAxisModelClass.extend({\n      /**\n       * @readOnly\n       */\n      type: axisName + 'Axis.' + axisType,\n      mergeDefaultAndTheme: function (option, ecModel) {\n        var layoutMode = this.layoutMode;\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        zrUtil.merge(option, themeModel.get(axisType + 'Axis'));\n        zrUtil.merge(option, this.getDefaultOption());\n        option.type = axisTypeDefaulter(axisName, option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      },\n\n      /**\n       * @override\n       */\n      optionUpdated: function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      },\n\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n      getCategories: function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      },\n      getOrdinalMeta: function () {\n        return this.__ordinalMeta;\n      },\n      defaultOption: zrUtil.mergeAll([{}, axisDefault[axisType + 'Axis'], extraDefaultOption], true)\n    });\n  });\n  ComponentModel.registerSubTypeDefaulter(axisName + 'Axis', zrUtil.curry(axisTypeDefaulter, axisName));\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#333',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#ccc'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.3)', 'rgba(200,200,200,0.3)']\n    }\n  }\n};\nvar axisDefault = {};\naxisDefault.categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  // Only usefull in the case like: category is\n  // ['2012-01-01', '2012-01-02', ...], where the input\n  // data has been ensured not duplicate and is large data.\n  // null means \"auto\":\n  // if axis.data provided, do not deduplication,\n  // else do deduplication.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\naxisDefault.valueAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For value axis, [GAP, GAP], where\n  // `GAP` can be an absolute pixel number (like `35`), or percent (like `'30%'`)\n  boundaryGap: [0, 0],\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  // Min value of the axis. can be:\n  // + a number\n  // + 'dataMin': use the min value in data.\n  // + null/undefined: auto decide min value (consider pretty look and boundaryGap).\n  // min: null,\n  // Max value of the axis. can be:\n  // + a number\n  // + 'dataMax': use the max value in data.\n  // + null/undefined: auto decide max value (consider pretty look and boundaryGap).\n  // max: null,\n  // Readonly prop, specifies start value of the range when using data zoom.\n  // rangeStart: null\n  // Readonly prop, specifies end value of the range when using data zoom.\n  // rangeEnd: null\n  // Optional value can be:\n  // + `false`: always include value 0.\n  // + `true`: the extent do not consider value 0.\n  // scale: false,\n  // AxisTick and axisLabel and splitLine are caculated based on splitNumber.\n  splitNumber: 5,\n  // Interval specifies the span of the ticks is mandatorily.\n  // interval: null\n  // Specify min interval when auto calculate tick interval.\n  // minInterval: null\n  // Specify max interval when auto calculate tick interval.\n  // maxInterval: null\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Lenght of minor tick\n    length: 3,\n    // Same inside with axisTick\n    // Line style\n    lineStyle: {// Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#eee',\n      width: 1\n    }\n  }\n}, defaultOption);\naxisDefault.timeAxis = zrUtil.defaults({\n  scale: true,\n  min: 'dataMin',\n  max: 'dataMax'\n}, axisDefault.valueAxis);\naxisDefault.logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, axisDefault.valueAxis);\nvar _default = axisDefault;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"../coord/cartesian/AxisModel\");\n\nrequire(\"./axis/CartesianAxisView\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar AxisBuilder = require(\"./AxisBuilder\");\n\nvar AxisView = require(\"./AxisView\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar _axisSplitHelper = require(\"./axisSplitHelper\");\n\nvar rectCoordAxisBuildSplitArea = _axisSplitHelper.rectCoordAxisBuildSplitArea;\nvar rectCoordAxisHandleRemove = _axisSplitHelper.rectCoordAxisHandleRemove;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\nvar CartesianAxisView = AxisView.extend({\n  type: 'cartesianAxis',\n  axisPointerClass: 'CartesianAxisPointer',\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get(name + '.show')) {\n        this['_' + name](axisModel, gridModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    CartesianAxisView.superCall(this, 'render', axisModel, ecModel, api, payload);\n  },\n  remove: function () {\n    rectCoordAxisHandleRemove(this);\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n\n      this._axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _minorSplitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        this._axisGroup.add(new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          subPixelOptimize: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        }));\n      }\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitArea: function (axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(this, this._axisGroup, axisModel, gridModel);\n  }\n});\nCartesianAxisView.extend({\n  type: 'xAxis'\n});\nCartesianAxisView.extend({\n  type: 'yAxis'\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n\n  if (axis.scale.isBlank()) {\n    return;\n  }\n\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n\n  if (!ticksCoords.length) {\n    return;\n  } // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n\n\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = axisView.__splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x;\n    var y;\n    var width;\n    var height;\n\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n\n  axisView.__splitAreaColors = newSplitAreaColors;\n}\n\nfunction rectCoordAxisHandleRemove(axisView) {\n  axisView.__splitAreaColors = null;\n}\n\nexports.rectCoordAxisBuildSplitArea = rectCoordAxisBuildSplitArea;\nexports.rectCoordAxisHandleRemove = rectCoordAxisHandleRemove;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./tooltip/TooltipModel\");\n\nrequire(\"./tooltip/TooltipView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Better way to pack data in graphic element\n\n/**\n * @action\n * @property {string} type\n * @property {number} seriesIndex\n * @property {number} dataIndex\n * @property {number} [x]\n * @property {number} [y]\n */\necharts.registerAction({\n  type: 'showTip',\n  event: 'showTip',\n  update: 'tooltip:manuallyShowTip'\n}, // noop\nfunction () {});\necharts.registerAction({\n  type: 'hideTip',\n  event: 'hideTip',\n  update: 'tooltip:manuallyHideTip'\n}, // noop\nfunction () {});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisPointerModelHelper = require(\"./axisPointer/modelHelper\");\n\nvar axisTrigger = require(\"./axisPointer/axisTrigger\");\n\nrequire(\"./axisPointer/AxisPointerModel\");\n\nrequire(\"./axisPointer/AxisPointerView\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// CartesianAxisPointer is not supposed to be required here. But consider\n// echarts.simple.js and online build tooltip, which only require gridSimple,\n// CartesianAxisPointer should be able to required somewhere.\necharts.registerPreprocessor(function (option) {\n  // Always has a global axisPointerModel for default setting.\n  if (option) {\n    (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n    var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n    // is not set, remain null/undefined, otherwise it will\n    // override existent link setting.\n\n    if (link && !zrUtil.isArray(link)) {\n      option.axisPointer.link = [link];\n    }\n  }\n}); // This process should proformed after coordinate systems created\n// and series data processed. So put it on statistic processing stage.\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n  // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n  // allAxesInfo should be updated when setOption performed.\n  ecModel.getComponent('axisPointer').coordSysAxesInfo = axisPointerModelHelper.collect(ecModel, api);\n}); // Broadcast to all views.\n\necharts.registerAction({\n  type: 'updateAxisPointer',\n  event: 'updateAxisPointer',\n  update: ':updateAxisPointer'\n}, axisTrigger);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar modelHelper = require(\"./modelHelper\");\n\nvar findPointFromSeries = require(\"./findPointFromSeries\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry;\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @param {Object} coordSysAxesInfo\n * @param {Object} payload\n * @param {string} [payload.currTrigger] 'click' | 'mousemove' | 'leave'\n * @param {Array.<number>} [payload.x] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Array.<number>} [payload.y] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Object} [payload.seriesIndex] finder, optional, restrict target axes.\n * @param {Object} [payload.dataIndex] finder, restrict target axes.\n * @param {Object} [payload.axesInfo] finder, restrict target axes.\n *        [{\n *          axisDim: 'x'|'y'|'angle'|...,\n *          axisIndex: ...,\n *          value: ...\n *        }, ...]\n * @param {Function} [payload.dispatchAction]\n * @param {Object} [payload.tooltipOption]\n * @param {Object|Array.<number>|Function} [payload.position] Tooltip position,\n *        which can be specified in dispatchAction\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n * @return {Object} content of event obj for echarts.connect.\n */\n\nfunction _default(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputFinder = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputFinder);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputFinder);\n  });\n  updateModelActually(showValueMap, axesInfo, outputFinder);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputFinder;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, dontSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By default use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    zrUtil.extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!dontSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch, outputFinder); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimension(dim, true);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get('label.precision'),\n      formatter: axisPointerModel.get('label.formatter')\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputFinder) {\n  var outputAxesInfo = outputFinder.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  zrUtil.each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  zrUtil.each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerModel = echarts.extendComponentModel({\n  type: 'axisPointer',\n  coordSysAxesInfo: null,\n  defaultOption: {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: null,\n    // set default in AxisPonterView.js\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // 'line' 'shadow' 'cross' 'none'.\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    // Init value depends on whether handle is used.\n    // [group0, group1, ...]\n    // Each group can be: {\n    //      mapper: function () {},\n    //      singleTooltip: 'multiple',  // 'multiple' or 'single'\n    //      xAxisId: ...,\n    //      yAxisName: ...,\n    //      angleAxisIndex: ...\n    // }\n    // mapper: can be ignored.\n    //      input: {axisInfo, value}\n    //      output: {axisInfo, value}\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      type: 'solid'\n    },\n    shadowStyle: {\n      color: 'rgba(150,150,150,0.3)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      // string | Function\n      precision: 'auto',\n      // Or a number like 0, 1, 2 ...\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      // default: axis line color\n      borderColor: null,\n      borderWidth: 0,\n      shadowBlur: 3,\n      shadowColor: '#aaa' // Considering applicability, common style should\n      // better not have shadowOffset.\n      // shadowOffsetX: 0,\n      // shadowOffsetY: 2\n\n    },\n    handle: {\n      show: false,\n\n      /* eslint-disable */\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      // jshint ignore:line\n\n      /* eslint-enable */\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  }\n});\nvar _default = AxisPointerModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar globalListener = require(\"./globalListener\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerView = echarts.extendComponentView({\n  type: 'axisPointer',\n  render: function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    globalListener.unregister(api.getZr(), 'axisPointer');\n    AxisPointerView.superApply(this._model, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n    AxisPointerView.superApply(this._model, 'dispose', arguments);\n  }\n});\nvar _default = AxisPointerView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar AxisView = require(\"../axis/AxisView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar CartesianAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  },\n\n  /**\n   * @override\n   */\n  getHandleTransform: function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get('handle.margin');\n    return {\n      position: viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo),\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  },\n\n  /**\n   * @override\n   */\n  updateHandleTransform: function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = transform.position;\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      position: currPosition,\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  }\n});\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nAxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\nvar _default = CartesianAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar clazzUtil = require(\"../../util/clazz\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar axisPointerModelHelper = require(\"./modelHelper\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n * Implemenents {module:echarts/component/axis/IAxisPointer}.\n */\n\nfunction BaseAxisPointer() {}\n\nBaseAxisPointer.prototype = {\n  /**\n   * @private\n   */\n  _group: null,\n\n  /**\n   * @private\n   */\n  _lastGraphicKey: null,\n\n  /**\n   * @private\n   */\n  _handle: null,\n\n  /**\n   * @private\n   */\n  _dragging: false,\n\n  /**\n   * @private\n   */\n  _lastValue: null,\n\n  /**\n   * @private\n   */\n  _lastStatus: null,\n\n  /**\n   * @private\n   */\n  _payloadInfo: null,\n\n  /**\n   * In px, arbitrary value. Do not set too small,\n   * no animation is ok for most cases.\n   * @protected\n   */\n  animationThreshold: 15,\n\n  /**\n   * @implement\n   */\n  render: function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps, axisPointerModel);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  },\n\n  /**\n   * @implement\n   */\n  remove: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @implement\n   */\n  dispose: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @protected\n   */\n  determineAnimation: function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  },\n\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  },\n\n  /**\n   * @protected\n   */\n  createPointerEl: function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  createLabelEl: function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Rect(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updatePointerEl: function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updateLabelEl: function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        shape: elOption.label.shape,\n        position: elOption.label.position\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderHandle: function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    var includeStyles = ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n    handle.setStyle(handleModel.getItemStyle(null, includeStyles)); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.attr('scale', [handleSize[0] / 2, handleSize[1] / 2]);\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  },\n\n  /**\n   * @private\n   */\n  _moveHandleToValue: function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragMove: function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  },\n\n  /**\n   * Throttled method.\n   * @private\n   */\n  _doDispatchAxisPointer: function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragEnd: function (moveAnimation) {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  },\n\n  /**\n   * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {number} value\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0}\n   */\n  getHandleTransform: null,\n\n  /**\n   * * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {Object} transform {position, rotation}\n   * @param {Array.<number>} delta [dx, dy]\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0, cursorPoint: [x, y]}\n   */\n  updateHandleTransform: null,\n\n  /**\n   * @private\n   */\n  clear: function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  },\n\n  /**\n   * @protected\n   */\n  doClear: function () {// Implemented by sub-class if necessary.\n  },\n\n  /**\n   * @protected\n   * @param {Array.<number>} xy\n   * @param {Array.<number>} wh\n   * @param {number} [xDimIndex=0] or 1\n   */\n  buildLabel: function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n};\nBaseAxisPointer.prototype.constructor = BaseAxisPointer;\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals = equals && propsEqual(lastProps[key], item);\n    });\n    return !!equals;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get('label.show') ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    position: trans.position.slice(),\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nclazzUtil.enableClassExtend(BaseAxisPointer);\nvar _default = BaseAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentModel({\n  type: 'tooltip',\n  dependencies: ['axisPointer'],\n  defaultOption: {\n    zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip主体内容\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    // 'single' | 'multipleByCoordSys'\n    renderMode: 'auto',\n    // 'auto' | 'html' | 'richText'\n    // 'auto': use html by default, and use non-html if `document` is not defined\n    // 'html': use html for tooltip\n    // 'richText': use canvas, svg, and etc. for tooltip\n    // 位置 {Array} | {Function}\n    // position: null\n    // Consider triggered from axisPointer handle, verticalAlign should be 'middle'\n    // align: null,\n    // verticalAlign: null,\n    // 是否约束 content 在 viewRect 中。默认 false 是为了兼容以前版本。\n    confine: false,\n    // 内容格式器：{string}（Template） ¦ {Function}\n    // formatter: null\n    showDelay: 0,\n    // 隐藏延迟，单位ms\n    hideDelay: 100,\n    // 动画变换时间，单位s\n    transitionDuration: 0.4,\n    enterable: false,\n    // 提示背景颜色，默认为透明度为0.7的黑色\n    backgroundColor: 'rgba(50,50,50,0.7)',\n    // 提示边框颜色\n    borderColor: '#333',\n    // 提示边框圆角，单位px，默认为4\n    borderRadius: 4,\n    // 提示边框线宽，单位px，默认为0（无边框）\n    borderWidth: 0,\n    // 提示内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    padding: 5,\n    // Extra css text\n    extraCssText: '',\n    // 坐标轴指示器，坐标轴触发有效\n    axisPointer: {\n      // 默认为直线\n      // 可选为：'line' | 'shadow' | 'cross'\n      type: 'line',\n      // type 为 line 的时候有效，指定 tooltip line 所在的轴，可选\n      // 可选 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // 默认 'auto'，会选择类型为 category 的轴，对于双数值轴，笛卡尔坐标系会默认选择 x 轴\n      // 极坐标系会默认选择 angle 轴\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {} // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      }\n    },\n    textStyle: {\n      color: '#fff',\n      fontSize: 14\n    }\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar TooltipContent = require(\"./TooltipContent\");\n\nvar TooltipRichContent = require(\"./TooltipRichContent\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar findPointFromSeries = require(\"../axisPointer/findPointFromSeries\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar Model = require(\"../../model/Model\");\n\nvar globalListener = require(\"../axisPointer/globalListener\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar axisPointerViewHelper = require(\"../axisPointer/viewHelper\");\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar _default = echarts.extendComponentView({\n  type: 'tooltip',\n  init: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    var tooltipContent;\n\n    if (this._renderMode === 'html') {\n      tooltipContent = new TooltipContent(api.getDom(), api, {\n        appendToBody: tooltipModel.get('appendToBody', true)\n      });\n      this._newLine = '<br/>';\n    } else {\n      tooltipContent = new TooltipRichContent(api);\n      this._newLine = '\\n';\n    }\n\n    this._tooltipContent = tooltipContent;\n  },\n  render: function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    /**\n     * @private\n     * @type {module:echarts/component/tooltip/TooltipModel}\n     */\n\n    this._tooltipModel = tooltipModel;\n    /**\n     * @private\n     * @type {module:echarts/model/Global}\n     */\n\n    this._ecModel = ecModel;\n    /**\n     * @private\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this._api = api;\n    /**\n     * Should be cleaned when render.\n     * @private\n     * @type {Array.<Array.<Object>>}\n     */\n\n    this._lastDataByCoordSys = null;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  },\n  _initGlobalListener: function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  },\n  _keepShow: function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self._lastX,\n          y: self._lastY\n        });\n      });\n    }\n  },\n\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  manuallyShowTip: function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n\n    if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.position = [payload.x, payload.y];\n      el.update();\n      el.tooltip = payload.tooltip; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: payload.dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          position: payload.position,\n          target: pointInfo.el\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  },\n  manuallyHideTip: function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  },\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  _manuallyAxisShowTip: function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model, tooltipModel]);\n\n    if (tooltipModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  },\n  _tryShow: function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } // Always show item tooltip if mouse is on the element with dataIndex\n    else if (el && el.dataIndex != null) {\n        this._lastDataByCoordSys = null;\n\n        this._showSeriesItemTooltip(e, el, dispatchAction);\n      } // Tooltip provided directly. Like legend.\n      else if (el && el.tooltip) {\n          this._lastDataByCoordSys = null;\n\n          this._showComponentItemTooltip(e, el, dispatchAction);\n        } else {\n          this._lastDataByCoordSys = null;\n\n          this._hide(dispatchAction);\n        }\n  },\n  _showOrMove: function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  },\n  _showAxisTooltip: function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleDefaultHTML = [];\n    var singleParamsList = [];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption, globalTooltipModel]);\n    var renderMode = this._renderMode;\n    var newLine = this._newLine;\n    var markers = {};\n    each(dataByCoordSys, function (itemCoordSys) {\n      // var coordParamList = [];\n      // var coordDefaultHTML = [];\n      // var coordTooltipModel = buildTooltipModel([\n      //     e.tooltipOption,\n      //     itemCoordSys.tooltipOption,\n      //     ecModel.getComponent(itemCoordSys.coordSysMainType, itemCoordSys.coordSysIndex),\n      //     globalTooltipModel\n      // ]);\n      // var displayMode = coordTooltipModel.get('displayMode');\n      // var paramsList = displayMode === 'single' ? singleParamsList : [];\n      each(itemCoordSys.dataByAxis, function (item) {\n        var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\n        var axisValue = item.value;\n        var seriesDefaultHTML = [];\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var valueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\n        zrUtil.each(item.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var dataParams = series && series.getDataParams(dataIndex);\n          dataParams.axisDim = item.axisDim;\n          dataParams.axisIndex = item.axisIndex;\n          dataParams.axisType = item.axisType;\n          dataParams.axisId = item.axisId;\n          dataParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, axisValue);\n          dataParams.axisValueLabel = valueLabel;\n\n          if (dataParams) {\n            singleParamsList.push(dataParams);\n            var seriesTooltip = series.formatTooltip(dataIndex, true, null, renderMode);\n            var html;\n\n            if (zrUtil.isObject(seriesTooltip)) {\n              html = seriesTooltip.html;\n              var newMarkers = seriesTooltip.markers;\n              zrUtil.merge(markers, newMarkers);\n            } else {\n              html = seriesTooltip;\n            }\n\n            seriesDefaultHTML.push(html);\n          }\n        }); // Default tooltip content\n        // FIXME\n        // (1) should be the first data which has name?\n        // (2) themeRiver, firstDataIndex is array, and first line is unnecessary.\n\n        var firstLine = valueLabel;\n\n        if (renderMode !== 'html') {\n          singleDefaultHTML.push(seriesDefaultHTML.join(newLine));\n        } else {\n          singleDefaultHTML.push((firstLine ? formatUtil.encodeHTML(firstLine) + newLine : '') + seriesDefaultHTML.join(newLine));\n        }\n      });\n    }, this); // In most case, the second axis is shown upper than the first one.\n\n    singleDefaultHTML.reverse();\n    singleDefaultHTML = singleDefaultHTML.join(this._newLine + this._newLine);\n    var positionExpr = e.position;\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, singleDefaultHTML, singleParamsList, Math.random(), point[0], point[1], positionExpr, undefined, markers);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  },\n  _showSeriesItemTooltip: function (e, el, dispatchAction) {\n    var ecModel = this._ecModel; // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = el.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = el.dataModel || seriesModel;\n    var dataIndex = el.dataIndex;\n    var dataType = el.dataType;\n    var data = dataModel.getData(dataType);\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model, this._tooltipModel]);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var seriesTooltip = dataModel.formatTooltip(dataIndex, false, dataType, this._renderMode);\n    var defaultHtml;\n    var markers;\n\n    if (zrUtil.isObject(seriesTooltip)) {\n      defaultHtml = seriesTooltip.html;\n      markers = seriesTooltip.markers;\n    } else {\n      defaultHtml = seriesTooltip;\n      markers = null;\n    }\n\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markers);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  },\n  _showComponentItemTooltip: function (e, el, dispatchAction) {\n    var tooltipOpt = el.tooltip;\n\n    if (typeof tooltipOpt === 'string') {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  },\n  _showTooltipContent: function (tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markers) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    if (formatter && typeof formatter === 'string') {\n      html = formatUtil.formatTpl(formatter, params, true);\n    } else if (typeof formatter === 'function') {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html, markers, tooltipModel);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html, markers, tooltipModel);\n    tooltipContent.show(tooltipModel);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  },\n\n  /**\n   * @param  {string|Function|Array.<number>|Object} positionExpr\n   * @param  {number} x Mouse x\n   * @param  {number} y Mouse y\n   * @param  {boolean} confine Whether confine tooltip content in view rect.\n   * @param  {Object|<Array.<Object>} params\n   * @param  {module:zrender/Element} el target element\n   * @param  {module:echarts/ExtensionAPI} api\n   * @return {Array.<number>}\n   */\n  _updatePosition: function (tooltipModel, positionExpr, x, y, content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (typeof positionExpr === 'function') {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      positionExpr.width = contentSize[0];\n      positionExpr.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(positionExpr, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (typeof positionExpr === 'string' && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (tooltipModel.get('confine')) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  },\n  // FIXME\n  // Should we remove this but leave this to user?\n  _updateContentNotChangedOnAxis: function (dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || {};\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged &= lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged &= lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged &= lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  },\n  _hide: function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  },\n  dispose: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.dispose();\n\n    globalListener.unregister('itemTooltip', api);\n  }\n});\n/**\n * @param {Array.<Object|module:echarts/model/Model>} modelCascade\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade) {\n  var resultModel = modelCascade.pop();\n\n  while (modelCascade.length) {\n    var tooltipOpt = modelCascade.pop();\n\n    if (tooltipOpt) {\n      if (Model.isInstance(tooltipOpt)) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (typeof tooltipOpt === 'string') {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    if (x + width + gapH > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar eventUtil = require(\"zrender/lib/core/event\");\n\nvar domUtil = require(\"zrender/lib/core/dom\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar formatUtil = require(\"../../util/format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar toCamelCase = formatUtil.toCamelCase;\nvar vendors = ['', '-webkit-', '-moz-', '-o-'];\nvar gCssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';\n/**\n * @param {number} duration\n * @return {string}\n * @inner\n */\n\nfunction assembleTransition(duration) {\n  var transitionCurve = 'cubic-bezier(0.23, 1, 0.32, 1)';\n  var transitionText = 'left ' + duration + 's ' + transitionCurve + ',' + 'top ' + duration + 's ' + transitionCurve;\n  return zrUtil.map(vendors, function (vendorPrefix) {\n    return vendorPrefix + 'transition:' + transitionText;\n  }).join(';');\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  var lineHeight = textStyleModel.get('lineHeight');\n\n  if (lineHeight == null) {\n    lineHeight = Math.round(fontSize * 3 / 2);\n  }\n\n  fontSize && cssText.push('line-height:' + lineHeight + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n/**\n * @param {Object} tooltipModel\n * @return {string}\n * @inner\n */\n\n\nfunction assembleCssText(tooltipModel) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = tooltipModel.get('padding'); // Animation transition. Do not animate when transitionDuration is 0.\n\n  transitionDuration && cssText.push(assembleTransition(transitionDuration));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-Color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-Color:#' + zrColor.toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + formatUtil.normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n} // If not able to make, do not modify the input `out`.\n\n\nfunction makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n\n  if (appendToBody) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      domUtil.transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n\n  out[2] = out[0] / zr.getWidth(); // The ratio of left to width\n\n  out[3] = out[1] / zr.getHeight(); // The ratio of top to height\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipContent\n * @param {HTMLElement} container\n * @param {ExtensionAPI} api\n * @param {Object} [opt]\n * @param {boolean} [opt.appendToBody]\n *        `false`: the DOM element will be inside the container. Default value.\n *        `true`: the DOM element will be appended to HTML body, which avoid\n *                some overflow clip but intrude outside of the container.\n * @constructor\n */\n\n\nfunction TooltipContent(container, api, opt) {\n  if (env.wxa) {\n    return null;\n  }\n\n  var el = document.createElement('div');\n  el.domBelongToZr = true;\n  this.el = el;\n  var zr = this._zr = api.getZr();\n  var appendToBody = this._appendToBody = opt && opt.appendToBody;\n  this._styleCoord = [0, 0, 0, 0]; // [left, top, left/width, top/height]\n\n  makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n  if (appendToBody) {\n    document.body.appendChild(el);\n  } else {\n    container.appendChild(el);\n  }\n\n  this._container = container;\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout; // FIXME\n  // Is it needed to trigger zr event manually if\n  // the browser do not support `pointer-events: none`.\n\n  var self = this;\n\n  el.onmouseenter = function () {\n    // clear the timeout in hideLater and keep showing tooltip\n    if (self._enterable) {\n      clearTimeout(self._hideTimeout);\n      self._show = true;\n    }\n\n    self._inContent = true;\n  };\n\n  el.onmousemove = function (e) {\n    e = e || window.event;\n\n    if (!self._enterable) {\n      // `pointer-events: none` is set to tooltip content div\n      // if `enterable` is set as `false`, and `el.onmousemove`\n      // can not be triggered. But in browser that do not\n      // support `pointer-events`, we need to do this:\n      // Try trigger zrender event to avoid mouse\n      // in and out shape too frequently\n      var handler = zr.handler;\n      var zrViewportRoot = zr.painter.getViewportRoot();\n      eventUtil.normalizeEvent(zrViewportRoot, e, true);\n      handler.dispatch('mousemove', e);\n    }\n  };\n\n  el.onmouseleave = function () {\n    if (self._enterable) {\n      if (self._show) {\n        self.hideLater(self._hideDelay);\n      }\n    }\n\n    self._inContent = false;\n  };\n}\n\nTooltipContent.prototype = {\n  constructor: TooltipContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var stl = container.currentStyle || document.defaultView.getComputedStyle(container);\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && stl.position !== 'absolute') {\n      domStyle.position = 'relative';\n    }\n\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveTooltipIfResized(); // Hide the tooltip\n    // PENDING\n    // this.hide();\n  },\n\n  /**\n   * when `alwaysShowContent` is true,\n   * we should move the tooltip after chart resized\n   */\n  _moveTooltipIfResized: function () {\n    var ratioX = this._styleCoord[2]; // The ratio of left to width\n\n    var ratioY = this._styleCoord[3]; // The ratio of top to height\n\n    var realX = ratioX * this._zr.getWidth();\n\n    var realY = ratioY * this._zr.getHeight();\n\n    this.moveTo(realX, realY);\n  },\n  show: function (tooltipModel) {\n    clearTimeout(this._hideTimeout);\n    var el = this.el;\n    var styleCoord = this._styleCoord;\n    el.style.cssText = gCssText + assembleCssText(tooltipModel) // Because of the reason described in:\n    // http://stackoverflow.com/questions/21125587/css3-transition-not-working-in-chrome-anymore\n    // we should set initial value to `left` and `top`.\n    + ';left:' + styleCoord[0] + 'px;top:' + styleCoord[1] + 'px;' + (tooltipModel.get('extraCssText') || '');\n    el.style.display = el.innerHTML ? 'block' : 'none'; // If mouse occasionally move over the tooltip, a mouseout event will be\n    // triggered by canvas, and cause some unexpectable result like dragging\n    // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n    // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n    // scenario.\n\n    el.style.pointerEvents = this._enterable ? 'auto' : 'none';\n    this._show = true;\n  },\n  setContent: function (content) {\n    this.el.innerHTML = content == null ? '' : content;\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var el = this.el;\n    return [el.clientWidth, el.clientHeight];\n  },\n  moveTo: function (zrX, zrY) {\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n    var style = this.el.style;\n    style.left = styleCoord[0] + 'px';\n    style.top = styleCoord[1] + 'px';\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  dispose: function () {\n    this.el.parentNode.removeChild(this.el);\n  },\n  getOuterSize: function () {\n    var width = this.el.clientWidth;\n    var height = this.el.clientHeight; // Consider browser compatibility.\n    // IE8 does not support getComputedStyle.\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      var stl = document.defaultView.getComputedStyle(this.el);\n\n      if (stl) {\n        width += parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\n        height += parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\n      }\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n};\nvar _default = TooltipContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\nvar graphicUtil = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Group from 'zrender/src/container/Group';\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth(); // The ratio of left to width\n\n  out[3] = out[1] / zr.getHeight(); // The ratio of top to height\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipRichContent\n * @constructor\n */\n\n\nfunction TooltipRichContent(api) {\n  var zr = this._zr = api.getZr();\n  this._styleCoord = [0, 0, 0, 0]; // [left, top, left/width, top/height]\n\n  makeStyleCoord(this._styleCoord, zr, api.getWidth() / 2, api.getHeight() / 2);\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout;\n}\n\nTooltipRichContent.prototype = {\n  constructor: TooltipRichContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveTooltipIfResized();\n  },\n\n  /**\n   * when `alwaysShowContent` is true,\n   * we should move the tooltip after chart resized\n   */\n  _moveTooltipIfResized: function () {\n    var ratioX = this._styleCoord[2]; // The ratio of left to width\n\n    var ratioY = this._styleCoord[3]; // The ratio of top to height\n\n    var realX = ratioX * this._zr.getWidth();\n\n    var realY = ratioY * this._zr.getHeight();\n\n    this.moveTo(realX, realY);\n  },\n  show: function (tooltipModel) {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.attr('show', true);\n    this._show = true;\n  },\n\n  /**\n   * Set tooltip content\n   *\n   * @param {string} content rich text string of content\n   * @param {Object} markerRich rich text style\n   * @param {Object} tooltipModel tooltip model\n   */\n  setContent: function (content, markerRich, tooltipModel) {\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var markers = {};\n    var text = content;\n    var prefix = '{marker';\n    var suffix = '|}';\n    var startId = text.indexOf(prefix);\n\n    while (startId >= 0) {\n      var endId = text.indexOf(suffix);\n      var name = text.substr(startId + prefix.length, endId - startId - prefix.length);\n\n      if (name.indexOf('sub') > -1) {\n        markers['marker' + name] = {\n          textWidth: 4,\n          textHeight: 4,\n          textBorderRadius: 2,\n          textBackgroundColor: markerRich[name],\n          // TODO: textOffset is not implemented for rich text\n          textOffset: [3, 0]\n        };\n      } else {\n        markers['marker' + name] = {\n          textWidth: 10,\n          textHeight: 10,\n          textBorderRadius: 5,\n          textBackgroundColor: markerRich[name]\n        };\n      }\n\n      text = text.substr(endId + 1);\n      startId = text.indexOf('{marker');\n    }\n\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    var fontSize = textStyleModel.get('fontSize');\n    var lineHeight = tooltipModel.get('textLineHeight');\n\n    if (lineHeight == null) {\n      lineHeight = Math.round(fontSize * 3 / 2);\n    }\n\n    this.el = new Text({\n      style: graphicUtil.setTextStyle({}, textStyleModel, {\n        rich: markers,\n        text: content,\n        textBackgroundColor: tooltipModel.get('backgroundColor'),\n        textBorderRadius: tooltipModel.get('borderRadius'),\n        textFill: tooltipModel.get('textStyle.color'),\n        textPadding: tooltipModel.get('padding'),\n        textLineHeight: lineHeight\n      }),\n      z: tooltipModel.get('z')\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var bounding = this.el.getBoundingRect();\n    return [bounding.width, bounding.height];\n  },\n  moveTo: function (x, y) {\n    if (this.el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      this.el.attr('position', [styleCoord[0], styleCoord[1]]);\n    }\n  },\n  hide: function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  dispose: function () {\n    clearTimeout(this._hideTimeout);\n\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n  },\n  getOuterSize: function () {\n    var size = this.getSize();\n    return {\n      width: size[0],\n      height: size[1]\n    };\n  }\n};\nvar _default = TooltipRichContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar echarts = require(\"../echarts\");\n\nvar graphic = require(\"../util/graphic\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\nvar _format = require(\"../util/format\");\n\nvar windowOpen = _format.windowOpen;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Model\necharts.extendComponentModel({\n  type: 'title',\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n  defaultOption: {\n    // 一级层叠\n    zlevel: 0,\n    // 二级层叠\n    z: 6,\n    show: true,\n    text: '',\n    // 超链接跳转\n    // link: null,\n    // 仅支持self | blank\n    target: 'blank',\n    subtext: '',\n    // 超链接跳转\n    // sublink: null,\n    // 仅支持self | blank\n    subtarget: 'blank',\n    // 'center' ¦ 'left' ¦ 'right'\n    // ¦ {number}（x坐标，单位px）\n    left: 0,\n    // 'top' ¦ 'bottom' ¦ 'center'\n    // ¦ {number}（y坐标，单位px）\n    top: 0,\n    // 水平对齐\n    // 'auto' | 'left' | 'right' | 'center'\n    // 默认根据 left 的位置判断是左对齐还是右对齐\n    // textAlign: null\n    //\n    // 垂直对齐\n    // 'auto' | 'top' | 'bottom' | 'middle'\n    // 默认根据 top 位置判断是上对齐还是下对齐\n    // textVerticalAlign: null\n    // textBaseline: null // The same as textVerticalAlign.\n    backgroundColor: 'rgba(0,0,0,0)',\n    // 标题边框颜色\n    borderColor: '#ccc',\n    // 标题边框线宽，单位px，默认为0（无边框）\n    borderWidth: 0,\n    // 标题内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    padding: 5,\n    // 主副标题纵向间隔，单位px，默认为10，\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bolder',\n      color: '#333'\n    },\n    subtextStyle: {\n      color: '#aaa'\n    }\n  }\n}); // View\n\necharts.extendComponentView({\n  type: 'title',\n  render: function (titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: titleModel.get('text'),\n        textFill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: graphic.setTextStyle({}, subtextStyleModel, {\n        text: subText,\n        textFill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        textVerticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    textEl.eventData = subTextEl.eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom');\n\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n\n    group.attr('position', [layoutRect.x, layoutRect.y]);\n    var alignStyle = {\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./legend/LegendModel\");\n\nrequire(\"./legend/legendAction\");\n\nrequire(\"./legend/LegendView\");\n\nvar legendFilter = require(\"./legend/legendFilter\");\n\nvar Component = require(\"../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Do not contain scrollable legend, for sake of file size.\n// Series Filter\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\nComponent.registerSubTypeDefaulter('legend', function () {\n  // Default 'plain' when no type specified.\n  return 'plain';\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _model = require(\"../../util/model\");\n\nvar isNameSpecified = _model.isNameSpecified;\n\nvar lang = require(\"../../lang\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar langSelector = lang.legend.selector;\nvar defaultSelectorOption = {\n  all: {\n    type: 'all',\n    title: zrUtil.clone(langSelector.all)\n  },\n  inverse: {\n    type: 'inverse',\n    title: zrUtil.clone(langSelector.inverse)\n  }\n};\nvar LegendModel = echarts.extendComponentModel({\n  type: 'legend.plain',\n  dependencies: ['series'],\n  layoutMode: {\n    type: 'box',\n    // legend.width/height are maxWidth/maxHeight actually,\n    // whereas realy width/height is calculated by its content.\n    // (Setting {left: 10, right: 10} does not make sense).\n    // So consider the case:\n    // `setOption({legend: {left: 10});`\n    // then `setOption({legend: {right: 10});`\n    // The previous `left` should be cleared by setting `ignoreSize`.\n    ignoreSize: true\n  },\n  init: function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n\n    this._updateSelector(option);\n  },\n  mergeOption: function (option) {\n    LegendModel.superCall(this, 'mergeOption', option);\n\n    this._updateSelector(option);\n  },\n  _updateSelector: function (option) {\n    var selector = option.selector;\n\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, defaultSelectorOption[item.type]);\n      });\n    }\n  },\n  optionUpdated: function () {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name = legendData[i].get('name');\n\n        if (this.isSelected(name)) {\n          // Force to unselect others\n          this.select(name);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  },\n  _updateData: function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Model>}\n   */\n  getData: function () {\n    return this._data;\n  },\n\n  /**\n   * @param {string} name\n   */\n  select: function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  },\n\n  /**\n   * @param {string} name\n   */\n  unSelect: function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  },\n\n  /**\n   * @param {string} name\n   */\n  toggleSelected: function (name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  },\n  allSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  },\n  inverseSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true); // Initially, default value is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      selected[name] = !selected[name];\n    });\n  },\n\n  /**\n   * @param {string} name\n   */\n  isSelected: function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  },\n  getOrient: function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  },\n  defaultOption: {\n    // 一级层叠\n    zlevel: 0,\n    // 二级层叠\n    z: 4,\n    show: true,\n    // 布局方式，默认为水平布局，可选为：\n    // 'horizontal' | 'vertical'\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    // 水平对齐\n    // 'auto' | 'left' | 'right'\n    // 默认为 'auto', 根据 x 的位置判断是左对齐还是右对齐\n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    // 图例边框颜色\n    borderColor: '#ccc',\n    borderRadius: 0,\n    // 图例边框线宽，单位px，默认为0（无边框）\n    borderWidth: 0,\n    // 图例内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    padding: 5,\n    // 各个item之间的间隔，单位px，默认为10，\n    // 横向布局时为水平间隔，纵向布局时为纵向间隔\n    itemGap: 10,\n    // the width of legend symbol\n    itemWidth: 25,\n    // the height of legend symbol\n    itemHeight: 14,\n    // the color of unselected legend symbol\n    inactiveColor: '#ccc',\n    // the borderColor of unselected legend symbol\n    inactiveBorderColor: '#ccc',\n    itemStyle: {\n      // the default borderWidth of legend symbol\n      borderWidth: 0\n    },\n    textStyle: {\n      // 图例文字颜色\n      color: '#333'\n    },\n    // formatter: '',\n    // 选择模式，默认开启图例开关\n    selectedMode: true,\n    // 配置默认选中状态，可配合LEGEND.SELECTED事件做动态数据载入\n    // selected: null,\n    // 图例内容（详见legend.data，数组中每一项代表一个item\n    // data: [],\n    // Usage:\n    // selector: [{type: 'all or inverse', title: xxx}]\n    // or\n    // selector: true\n    // or\n    // selector: ['all', 'inverse']\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: ' sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    // Value can be 'start' or 'end'\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    // Tooltip 相关配置\n    tooltip: {\n      show: false\n    }\n  }\n});\nvar _default = LegendModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    zrUtil.each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n    selected: selectedMap\n  } : {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n/**\n * @event legendToggleSelect\n * @type {Object}\n * @property {string} type 'legendToggleSelect'\n * @property {string} [from]\n * @property {string} name Series name or data item name\n */\n\n\necharts.registerAction('legendToggleSelect', 'legendselectchanged', zrUtil.curry(legendSelectActionHandler, 'toggleSelected'));\necharts.registerAction('legendAllSelect', 'legendselectall', zrUtil.curry(legendSelectActionHandler, 'allSelect'));\necharts.registerAction('legendInverseSelect', 'legendinverseselect', zrUtil.curry(legendSelectActionHandler, 'inverseSelect'));\n/**\n * @event legendSelect\n * @type {Object}\n * @property {string} type 'legendSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendSelect', 'legendselected', zrUtil.curry(legendSelectActionHandler, 'select'));\n/**\n * @event legendUnSelect\n * @type {Object}\n * @property {string} type 'legendUnSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendUnSelect', 'legendunselected', zrUtil.curry(legendSelectActionHandler, 'unSelect'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _listComponent = require(\"../helper/listComponent\");\n\nvar makeBackground = _listComponent.makeBackground;\n\nvar layoutUtil = require(\"../../util/layout\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar _default = echarts.extendComponentView({\n  type: 'legend.plain',\n  newlineDisabled: false,\n\n  /**\n   * @override\n   */\n  init: function () {\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n    this.group.add(this._contentGroup = new Group());\n    /**\n     * @private\n     * @type {module:zrender/Element}\n     */\n\n    this._backgroundEl;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this.group.add(this._selectorGroup = new Group());\n    /**\n     * If first rendering, `contentGroup.position` is [0, 0], which\n     * does not make sense and may cause unexepcted animation if adopted.\n     * @private\n     * @type {boolean}\n     */\n\n    this._isFirstRender = true;\n  },\n\n  /**\n   * @protected\n   */\n  getContentGroup: function () {\n    return this._contentGroup;\n  },\n\n  /**\n   * @protected\n   */\n  getSelectorGroup: function () {\n    return this._selectorGroup;\n  },\n\n  /**\n   * @override\n   */\n  render: function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.attr('position', [layoutRect.x - mainRect.x, layoutRect.y - mainRect.y]); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  },\n\n  /**\n   * @protected\n   */\n  resetInner: function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  },\n\n  /**\n   * @protected\n   */\n  renderInner: function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (itemModel, dataIndex) {\n      var name = itemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        contentGroup.add(new Group({\n          newline: true\n        }));\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Legend to control series.\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var color = data.getVisual('color');\n        var borderColor = data.getVisual('borderColor'); // If color is a callback function\n\n        if (typeof color === 'function') {\n          // Use the first data\n          color = color(seriesModel.getDataParams(0));\n        } // If borderColor is a callback function\n\n\n        if (typeof borderColor === 'function') {\n          // Use the first data\n          borderColor = borderColor(seriesModel.getDataParams(0));\n        } // Using rect symbol defaultly\n\n\n        var legendSymbolType = data.getVisual('legendSymbol') || 'roundRect';\n        var symbolType = data.getVisual('symbol');\n\n        var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n\n            if (!provider.containName(name)) {\n              return;\n            }\n\n            var idx = provider.indexOfName(name);\n            var color = provider.getItemVisual(idx, 'color');\n            var borderColor = provider.getItemVisual(idx, 'borderColor');\n            var legendSymbolType = 'roundRect';\n\n            var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, null, itemAlign, color, borderColor, selectMode); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  },\n  _createSelector: function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function (selectorItem) {\n      createSelectorButton(selectorItem);\n    });\n\n    function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel('emphasis.selectorLabel');\n      graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, emphasisLabelModel, {\n        defaultText: selectorItem.title,\n        isRectText: false\n      });\n      graphic.setHoverStyle(labelText);\n    }\n  },\n  _createItem: function (name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode) {\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var inactiveColor = legendModel.get('inactiveColor');\n    var inactiveBorderColor = legendModel.get('inactiveBorderColor');\n    var symbolKeepAspect = legendModel.get('symbolKeepAspect');\n    var legendModelItemStyle = legendModel.getModel('itemStyle');\n    var isSelected = legendModel.isSelected(name);\n    var itemGroup = new Group();\n    var textStyleModel = itemModel.getModel('textStyle');\n    var itemIcon = itemModel.get('icon');\n    var tooltipModel = itemModel.getModel('tooltip');\n    var legendGlobalTooltipModel = tooltipModel.parentModel; // Use user given icon first\n\n    legendSymbolType = itemIcon || legendSymbolType;\n    var legendSymbol = createSymbol(legendSymbolType, 0, 0, itemWidth, itemHeight, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n    symbolKeepAspect == null ? true : symbolKeepAspect);\n    itemGroup.add(setSymbolStyle(legendSymbol, legendSymbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected)); // Compose symbols\n    // PENDING\n\n    if (!itemIcon && symbolType // At least show one symbol, can't be all none\n    && (symbolType !== legendSymbolType || symbolType === 'none')) {\n      var size = itemHeight * 0.8;\n\n      if (symbolType === 'none') {\n        symbolType = 'circle';\n      }\n\n      var legendSymbolCenter = createSymbol(symbolType, (itemWidth - size) / 2, (itemHeight - size) / 2, size, size, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n      symbolKeepAspect == null ? true : symbolKeepAspect); // Put symbol in the center\n\n      itemGroup.add(setSymbolStyle(legendSymbolCenter, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    itemGroup.add(new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        textFill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        textAlign: textAlign,\n        textVerticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true,\n      tooltip: tooltipModel.get('show') ? zrUtil.extend({\n        content: name,\n        // Defaul formatter\n        formatter: legendGlobalTooltipModel.get('formatter', true) || function () {\n          return name;\n        },\n        formatterParams: {\n          componentType: 'legend',\n          legendIndex: legendModel.componentIndex,\n          name: name,\n          $vars: ['name']\n        }\n      }, tooltipModel.option) : null\n    });\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    graphic.setHoverStyle(itemGroup);\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  },\n\n  /**\n   * @protected\n   */\n  layoutInner: function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.attr('position', selectorPos);\n      contentGroup.attr('position', contentPos);\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.attr('position', contentPos);\n      return this.group.getBoundingRect();\n    }\n  },\n\n  /**\n   * @protected\n   */\n  remove: function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  }\n});\n\nfunction setSymbolStyle(symbol, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected) {\n  var itemStyle;\n\n  if (symbolType !== 'line' && symbolType.indexOf('empty') < 0) {\n    itemStyle = legendModelItemStyle.getItemStyle();\n    symbol.style.stroke = borderColor;\n\n    if (!isSelected) {\n      itemStyle.stroke = inactiveBorderColor;\n    }\n  } else {\n    itemStyle = legendModelItemStyle.getItemStyle(['borderWidth', 'borderColor']);\n  }\n\n  return symbol.setStyle(itemStyle);\n}\n\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  }); // highlight after select\n\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\nvar layoutBox = _layout.box;\nvar positionElement = _layout.positionElement;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\nfunction layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\n\nfunction makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}\n\nexports.layout = layout;\nexports.makeBackground = makeBackground;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}\n\nmodule.exports = _default;","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}"],"sourceRoot":""}