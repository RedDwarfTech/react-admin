(this["webpackJsonpreact-admin"]=this["webpackJsonpreact-admin"]||[]).push([[9],{564:function(e,t,n){},664:function(e,t,n){"use strict";n.r(t);n(66);var a=n(67),r=(n(97),n(99)),s=(n(98),n(100)),o=n(12),i=n(13),c=n(15),u=n(14),l=n(0),d=n.n(l),f=n(563),p=n.n(f),m=(n(564),n(646)),h=n(74),v=n.n(h),g=(n(565),n(587),n(598),n(599),n(102)),b=n.n(g),y=n(334),k=n(71);var j=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={trend:{}},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){!function(e){var t={method:"post",url:"/manage/home/v1/trend/overview",data:JSON.stringify(e)};Object(k.a)(t,y.b)}({})}},{key:"render",value:function(){var e=this.props.trend;if(e&&0===Object.keys(e).length||void 0===e);else{var t=document.getElementById("line");if(null==t)return d.a.createElement("div",null,"\u6682\u65e0\u6570\u636e");var n=v.a.init(t);n.setOption({tooltip:{trigger:"axis"},legend:{data:["\u6587\u7ae0","\u9891\u9053","\u7f16\u8f91\u9009\u62e9\u6587\u7ae0"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.props.trend.length>0?Object(m.a)(new Set(this.props.trend.map((function(e){return b.a.unix(parseInt(e.statistic_time)/1e3).format("YYYY-MM-DD")})))):[""]},yAxis:{type:"value"},series:[{name:"\u6587\u7ae0",type:"line",data:this.props.trend.length>0?this.props.trend.filter((function(e){return 1===e.trend_item})).map((function(e){return e.incre_num})):[1]},{name:"\u9891\u9053",type:"line",data:this.props.trend.length>0?this.props.trend.filter((function(e){return 2===e.trend_item})).sort((function(e,t){return e.statistic_time-t.statistic_time})).map((function(e){return e.incre_num})):[1]},{name:"\u7f16\u8f91\u9009\u62e9\u6587\u7ae0",type:"line",data:this.props.trend.length>0?this.props.trend.filter((function(e){return 3===e.trend_item})).map((function(e){return e.trend_item})):[1]}]}),window.addEventListener("resize",(function(){n.resize()}))}return d.a.createElement("div",{id:"line",style:{height:300}})}}]),n}(l.Component),E=n(383),O=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).fullToggle=function(){p.a.isEnabled&&p.a.request(document.getElementById("bar"))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){!function(e){var t={method:"get",url:"/manage/home/v1/dashboard/overview",data:JSON.stringify(e)};Object(k.a)(t,y.a)}("")}},{key:"render",value:function(){var e=this.props.dashboard.dashboard;return e&&0===Object.keys(e).length||void 0===e?d.a.createElement("div",null,"loading..."):d.a.createElement(a.a,{className:"index animated fadeIn"},d.a.createElement(r.a,{gutter:24,className:"index-header"},d.a.createElement(s.a,{span:6},d.a.createElement("div",{className:"base-style wechat"},d.a.createElement(E.a,{type:"app",className:"icon-style"}),d.a.createElement("div",null,d.a.createElement("span",null,e.app_count),d.a.createElement("div",null,"\u5e94\u7528\u6570"))))),d.a.createElement(r.a,{gutter:8},d.a.createElement(s.a,{span:12},d.a.createElement("div",{className:"base-style"},d.a.createElement(j,{trend:this.props.dashboard.trend})))))}}]),n}(l.Component);t.default=O},71:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(111);var a=n(110),r=n(153),s=n.n(r),o=n(25),i=n(24),c=!1,u=[],l=s.a.create({timeout:15e3});function d(){o.a.dispatch(Object(i.d)("")),window.location.href="/#/login"}function f(e,t){return l(e).then((function(e){if(e){var n=null==e.data.result||0===Object.keys(e.data.result).length?{}:e.data.result;o.a.dispatch(t(n))}})).catch((function(e){console.error(e)}))}l.defaults.headers.post["Content-Type"]="application/json",l.interceptors.request.use((function(e){var t=localStorage.getItem("accessToken");return t&&(e.headers["x-access-token"]=t),e}),(function(e){return Promise.reject(e)})),l.interceptors.response.use((function(e){if(200===e.status&&"200"===e.data.statusCode&&"200"===e.data.resultCode)return Promise.resolve(e);if("907"===e.data.statusCode)d();else if("904"===e.data.statusCode)d();else{if("00100100004016"!==e.data.resultCode){var t=e.data.msg;return a.b.error(t),Promise.reject(e)}!function(e){var t=e.config;if(c)return new Promise((function(e){u.push((function(n){t.baseURL="",t.headers["x-access-token"]=n,e(l(t))}))}));c=!0,function(){var e=localStorage.getItem("refreshToken");e||d();return function(e){return function(e){return l(e).then((function(e){if(e)return null==e.data.result||0===Object.keys(e.data.result).length?{}:e.data.result})).catch((function(e){console.error(e)}))}({method:"post",url:"/manage/auth/access_token/refresh",data:{deviceId:"xxxxxx",app:6,refreshToken:e}})}(e)}().then((function(e){var n=e.accessToken;if(n)return localStorage.setItem("token",n),localStorage.setItem("accessToken",n),l.defaults.headers["x-access-token"]=n,u.forEach((function(e){return e(n)})),u=[],l(t)})).catch((function(e){console.error("refreshtoken error =>",e),d()})).finally((function(){c=!1}))}(e)}}),(function(e){switch(e.response.status){case 401:case 403:case 404:case 500:break;default:console.log("\u5176\u4ed6\u9519\u8bef\u4fe1\u606f")}return Promise.reject(e)}))}}]);
//# sourceMappingURL=index.9b449d3a.chunk.js.map